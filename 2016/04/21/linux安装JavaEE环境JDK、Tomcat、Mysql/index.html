<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="tomcat,linux,mysql,jdk," />










<meta name="description" content="JDK1、把压缩包上传到linux服务器目录&#x2F;usr&#x2F;local&#x2F;tmp 这里使用FileZilla上传 2、解压压缩包：tar zxvf jdk-8u191-linux-x64.tar.gz 3、把解压后的文件复制到&#x2F;usr&#x2F;local&#x2F;jdk8 cp -r jdk1.8.0_191 &#x2F;usr&#x2F;local&#x2F;jdk8 4、配置环境变量，linux是通过修改环境变量配置文件来配置，使用vim编辑：">
<meta property="og:type" content="article">
<meta property="og:title" content="linux安装JavaEE环境JDK、Tomcat、Mysql">
<meta property="og:url" content="https://huyunshun.com/2016/04/21/linux%E5%AE%89%E8%A3%85JavaEE%E7%8E%AF%E5%A2%83JDK%E3%80%81Tomcat%E3%80%81Mysql/index.html">
<meta property="og:site_name" content="简">
<meta property="og:description" content="JDK1、把压缩包上传到linux服务器目录&#x2F;usr&#x2F;local&#x2F;tmp 这里使用FileZilla上传 2、解压压缩包：tar zxvf jdk-8u191-linux-x64.tar.gz 3、把解压后的文件复制到&#x2F;usr&#x2F;local&#x2F;jdk8 cp -r jdk1.8.0_191 &#x2F;usr&#x2F;local&#x2F;jdk8 4、配置环境变量，linux是通过修改环境变量配置文件来配置，使用vim编辑：">
<meta property="og:image" content="https://img.huyunshun.com/img/20200421165530.png">
<meta property="og:image" content="https://img.huyunshun.com/img/20200421165616.png">
<meta property="og:image" content="https://img.huyunshun.com/img/20200421165727.png">
<meta property="article:published_time" content="2016-04-20T16:00:00.000Z">
<meta property="article:modified_time" content="2020-05-20T10:04:24.687Z">
<meta property="article:author" content="初晨">
<meta property="article:tag" content="tomcat">
<meta property="article:tag" content="linux">
<meta property="article:tag" content="mysql">
<meta property="article:tag" content="jdk">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.huyunshun.com/img/20200421165530.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://huyunshun.com/2016/04/21/linux安装JavaEE环境JDK、Tomcat、Mysql/"/>





  <title>linux安装JavaEE环境JDK、Tomcat、Mysql | 简</title>
  








  <script type="text/javascript" src="/js/src/love.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">

  <!-- 看板娘 -->
    
        <script async src="/live2d-widget/autoload.js"></script>
    
 <!-- 飘动的彩带） -->
  <script src="/js/src/piao.js" type="text/javascript"></script>
<meta name="generator" content="Hexo 4.2.1"></head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">简</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">人生短暂，学海无边，而大道至简。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huyunshun.com/2016/04/21/linux%E5%AE%89%E8%A3%85JavaEE%E7%8E%AF%E5%A2%83JDK%E3%80%81Tomcat%E3%80%81Mysql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="初晨">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img.huyunshun.com/img/20200522182348.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="简">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">linux安装JavaEE环境JDK、Tomcat、Mysql</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-21T00:00:00+08:00">
                2016-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h2><pre><code>1、把压缩包上传到linux服务器目录/usr/local/tmp
这里使用FileZilla上传
2、解压压缩包：tar zxvf jdk-8u191-linux-x64.tar.gz
3、把解压后的文件复制到/usr/local/jdk8
cp -r jdk1.8.0_191 /usr/local/jdk8
4、配置环境变量，linux是通过修改环境变量配置文件来配置，使用vim编辑：
vim /etc/profile
在文件中添加环境变量信息：
#export PATH USER LOGNAME MAIL HOSTNAME HISTSIZE HISTCONTROL
export JAVA_HOME=/usr/local/jdk8
export PATH=$JAVA_HOME/bin:$PATH
export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar#jdk1.6以后不用配置classpath</code></pre><p><img src="https://img.huyunshun.com/img/20200421165530.png" alt="20200421165530"></p>
<pre><code>5、解析文件或者重启系统
source /etc/profile
6、验证java环境：
[root@localhost ~]# java -version
java version &quot;1.8.0_191&quot;
Java(TM) SE Runtime Environment (build 1.8.0_191-b12)
Java HotSpot(TM) 64-Bit Server VM (build 25.191-b12, mixed mode)</code></pre><h2 id="Tomcat安装"><a href="#Tomcat安装" class="headerlink" title="Tomcat安装"></a>Tomcat安装</h2><pre><code>1、把安装包上传到服务器/usr/local/tmp
[root@localhost local]# ls tmp
apache-tomcat-7.0.68.tar.gz  Demo.class  Demo.java  mysql-5.6.31-linux-glibc2.5-x86_64.tar.gz
2、解压
[root@localhost local]# tar -zxvf tmp/apache-tomcat-7.0.68.tar.gz
3、复制解压文件到/usr/local/tomcat7.0
命令：cp -r apache-tomcat-7.0.68 /usr/local/tomcat7.0
上一步直接把文件解压到local目录了，这一步直接省略。
[root@localhost local]# ls
apache-tomcat-7.0.68  bin  etc  games  include  jdk8  lib  lib64  libexec  sbin  share  src  tmp
4、添加环境变量vim /etc/profile
export TOMCAT_HOME=/usr/local/apache-tomcat-7.0.68
export CATALINA_HOME=/usr/local/apache-tomcat-7.0.68#tomcat启动主服务</code></pre><p><img src="https://img.huyunshun.com/img/20200421165616.png" alt="20200421165616"></p>
<pre><code>运行配置：source /etc/profile
5、开放端口让通过防火墙（centos默认开放端口只有22）
[root@localhost local]# vim /etc/sysconfig/iptables
类似22端口，增加开放8080端口的配置：
-A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT
比如要开放连续的多个端口：8080:9900  #开放8080到9900之间的所有端口。
重启服务，使其端口配置生效。
[root@localhost local]# service iptables restart
iptables: Setting chains to policy ACCEPT: filter          [  OK  ]
iptables: Flushing firewall rules:                         [  OK  ]
iptables: Unloading modules:                               [  OK  ]
iptables: Applying firewall rules:  
分别有：restart  start   stop

6、启动Tomcat
进入到Tomcat的bin目录
直接启动：./startup.sh
[root@localhost bin]# ./startup.sh
Using CATALINA_BASE:   /usr/local/apache-tomcat-7.0.68
Using CATALINA_HOME:   /usr/local/apache-tomcat-7.0.68
Using CATALINA_TMPDIR: /usr/local/apache-tomcat-7.0.68/temp
Using JRE_HOME:        /usr/local/jdk8
Using CLASSPATH:       /usr/local/apache-tomcat-7.0.68/bin/bootstrap.jar:/usr/local/apache-tomcat-7.0.68/bin/tomcat-juli.jar
Tomcat started.
[root@localhost bin]# ./shutdown.sh

启动并打印启动信息：
[root@localhost bin]# ./startup.sh &amp; tailf /usr/local/apache-tomcat-7.0.68/logs/catalina.out
..............###显示启动过程的日志信息
INFO: Server startup in 1567 ms</code></pre><h2 id="MYSQL"><a href="#MYSQL" class="headerlink" title="MYSQL"></a>MYSQL</h2><p>CentOS上安装MySql官方推荐使用rpm在线安装的方式进行安装。但是使用在线安装的方式无法修改安装的路径，而且速度慢。</p>
<h3 id="1、复制MySQL道服务器-usr-local-tmp"><a href="#1、复制MySQL道服务器-usr-local-tmp" class="headerlink" title="1、复制MySQL道服务器/usr/local/tmp"></a>1、复制MySQL道服务器/usr/local/tmp</h3><h3 id="2、解压缩到-usr-local"><a href="#2、解压缩到-usr-local" class="headerlink" title="2、解压缩到/usr/local"></a>2、解压缩到/usr/local</h3><pre><code>[root@localhost local]# tar -zxvf tmp/mysql-5.6.31-linux-glibc2.5-x86_64.tar.gz
修改文件名太长
[root@localhost local]# mv mysql-5.6.31-linux-glibc2.5-x86_64 mysql-5.6.31
[root@localhost local]# ls
apache-tomcat-7.0.68  etc    include  lib    libexec       sbin   src
bin                   games  jdk8     lib64  mysql-5.6.31  share  tmp</code></pre><h3 id="3、创建用户和用户组"><a href="#3、创建用户和用户组" class="headerlink" title="3、创建用户和用户组"></a>3、创建用户和用户组</h3><pre><code>首先：单独为MySQL创建用户和用户组的目的是为了保证mysql服务的独立性，隔离风险；即便mysql服务被黑掉，得到了mysql用户权限，也不会影响整个系统的安全，因为读写不了其他文件。             
其次：所指定的用户是想要运行mysqld进程用户名。这个是可变的，不一定非要是mysql。设置这个用户以后，所有通过mysqld进程创建的文件都会属于这个用户。
添加名为mysql用户组
[root@localhost local]# groupadd mysql
创建用户mysql，并指定所属组为mysql
[root@localhost local]# useradd -r -g mysql mysql</code></pre><h3 id="4、赋权，让用户组合用户具有操作权限"><a href="#4、赋权，让用户组合用户具有操作权限" class="headerlink" title="4、赋权，让用户组合用户具有操作权限"></a>4、赋权，让用户组合用户具有操作权限</h3><pre><code>一定要保证在需要赋予某个目录权限的这个目录中操作；.号表示本级目录。
变更mysql用户组具有操作本级目录的权限：
[root@localhost mysql-5.6.31]# chgrp -R mysql .
变更mysql用户具有操作本级目录的权限：
[root@localhost mysql-5.6.31]# chown -R mysql .
上面两条命令可以同时换成一条来完成操作：
chown -R mysql:mysql ./
mysql:mysql，第一个mysql是用户名，第二个mysql是组名
chown -R mysql:mysql /usr/local/mysql-5.6.31  #这种也可以</code></pre><h3 id="5、初始化（安装数据库注册服务）"><a href="#5、初始化（安装数据库注册服务）" class="headerlink" title="5、初始化（安装数据库注册服务）"></a>5、初始化（安装数据库注册服务）</h3><pre><code>判断/etc/my.cnf（mysql全局配置文件）是否存在，如果存在，则删除。
[root@localhost mysql-5.6.31]# ls /etc/my.cnf
/etc/my.cnf
[root@localhost mysql-5.6.31]# rm /etc/my.cnf
rm: remove regular file `/etc/my.cnf&apos;? y
[root@localhost mysql-5.6.31]# ls /etc/my.cnf
ls: cannot access /etc/my.cnf: No such file or directory
执行初始化脚本文件
[root@localhost mysql-5.6.31]# ls scripts
mysql_install_db
[root@localhost mysql-5.6.31]# ./scripts/mysql_install_db --user=mysql #使用mysql用户执行该脚本</code></pre><h3 id="6、修改配置文件"><a href="#6、修改配置文件" class="headerlink" title="6、修改配置文件"></a>6、修改配置文件</h3><pre><code>配置my.cnf和启动文件，如没有特殊操作，直接复制mysql服务启动配置文件到/etc/下并重命名为my.cnf
[root@localhost mysql-5.6.31]#  cp support-files/my-default.cnf /etc/my.cnf
其实步骤5中的判断/etc/my.cnf可以不用，如果文件存在会提示是否覆盖？
[root@localhost mysql-5.6.31]#  cp support-files/my-default.cnf /etc/my.cnf
cp: overwrite `/etc/my.cnf&apos;? y
配置启动服务文件
将mysql加入到可控制启动的服务的文件夹内，并命名mysql，就可以用service mysql start控制启动mysql
[root@localhost mysql-5.6.31]# cp support-files/mysql.server /etc/rc.d/init.d/mysql
    /etc/init.d 是/etc/rc.d/init.d的链接，在/etc/init.d添加一个文件会同步在/etc/rc.d/init.d下添加一个相同文件
测试出问题：
[root@localhost mysql-5.6.31]# service mysql-5.6.31 start
/etc/init.d/mysql-5.6.31: line 256: my_print_defaults: command not found
/etc/init.d/mysql-5.6.31: line 276: cd: /usr/local/mysql: No such file or directory
Starting MySQL ERROR! Couldn&apos;t find MySQL server (/usr/local/mysql/bin/mysqld_safe)

原因是我的MySQL文件夹带了版本信息，目录名不是默认mysql，解决办法在MySQL全局配置/etc/mycnf中设置MySQL的主目录。
[root@localhost init.d]# vim /etc/my.cnf  
basedir=/usr/local/mysql-5.6.31
datadir=/usr/local/mysql-5.6.31/data
或者
vim /etc/init.d/mysql
#   basedir=&lt;path-to-mysql-installation-directory&gt;
basedir=/usr/local/mysql-5.6.31
datadir=/usr/local/mysql-5.6.31/data
保存，再测试---通过
[root@localhost mysql-5.6.31]# service mysql start
Starting MySQL.. SUCCESS!

开机自启动mysql服务
让mysql服务加入到开机启动指令管理的服务列表中，前提是服务文件拷贝到init.d下
chkconfig --add mysql
显示服务列表：chkconfig --list
如果mysql服务的345都是no的话则执行：
chkconfig mysql on
否则执行如下命令：
chkconfig --level 345 mysql on
on : 针对的服务有等级限制，具体查询chkconfig详细
验证：reboot重启后，运行netstat -na | grep 3306有监听说明成功</code></pre><h3 id="7、命令行操作MySQL"><a href="#7、命令行操作MySQL" class="headerlink" title="7、命令行操作MySQL"></a>7、命令行操作MySQL</h3><pre><code>以上配置没有问题，启动服务后可以通过命令进入MySQL命令行模式：
[root@localhost mysql-5.6.31]# mysql -u root -p
-bash: mysql: command not found
提示没有命令，需要添加软连接，把mysql中/bin/mysql添加到/usr/bin/中，类似windows中添加一个可执行文件的path或者快捷方式。
[root@localhost mysql-5.6.31]# ln -s /usr/local/mysql-5.6.31/bin/mysql /usr/bin/mysql
这样就可以使用mysql命令行了
[root@localhost mysql-5.6.31]# mysql -u root -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 1
...
Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.
mysql&gt; show databases ;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| test               |
+--------------------+
4 rows in set (0.11 sec)</code></pre><h3 id="8、设置root密码"><a href="#8、设置root密码" class="headerlink" title="8、设置root密码"></a>8、设置root密码</h3><pre><code>如果忘记密码无法登陆，则先通过启动安全模式的方式进入到mysql后修改密码。
进入/etc/my.cnf 在[mysql]下添加skip-grant-tables 启动安全模式   vi /etc/my.cnf
重启服务：service mysql restart
登录mysql，输入密码时直接回车mysql -u root -p
修改mysql数据库中的user表的password，5.7版本以下才有这个列，5.7及其上密码列为authentication_string：mysql&gt; use mysql
Database changed
mysql&gt; update user set password=password(&apos;123456&apos;) where user=&apos;root&apos;;
刷新权限：
mysql&gt; flush privileges;
Query OK, 0 rows affected (0.02 sec)
退出，重新连接，测试ok
[root@localhost mysql-5.6.31]# mysql -u root -p123456
Warning: Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.</code></pre><h3 id="9、设置远程连接（外部访问数据库）"><a href="#9、设置远程连接（外部访问数据库）" class="headerlink" title="9、设置远程连接（外部访问数据库）"></a>9、设置远程连接（外部访问数据库）</h3><pre><code>执行赋予权限命令
mysql&gt;GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;123456&apos; WITH GRANT OPTION;
刷新权限：
mysql&gt; flush privileges;
注：
grant 权限 on 数据库对象 to 用户
如果想让授权的用户，也可以将这些权限 grant 给其他用户，需要选项 &quot;grant option&quot;
%可能是localhost或192.168.0.%或192.168.%.%等等，所以直接使用%
    grant使用可以参考https://www.cnblogs.com/crxis/p/7044582.html

开启防火墙mysql3306端口的外部访问，CentOS升级到7之后，使用firewalld代替了原来的iptables。
[root@localhost mysql-5.6.31]# vim /etc/sysconfig/iptables
[root@localhost mysql-5.6.31]# service iptables restart
iptables: Setting chains to policy ACCEPT: filter          [  OK  ]
iptables: Flushing firewall rules:                         [  OK  ]
iptables: Unloading modules:                               [  OK  ]
iptables: Applying firewall rules:                         [  OK  ]</code></pre><p>外部测试：</p>
<p><img src="https://img.huyunshun.com/img/20200421165727.png" alt="20200421165727"></p>
<h3 id="10、一系列测试如下"><a href="#10、一系列测试如下" class="headerlink" title="10、一系列测试如下"></a>10、一系列测试如下</h3><pre><code>mysql&gt; show satabases;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &apos;satabases&apos; at line 1                 
mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| test               |
+--------------------+
4 rows in set (0.02 sec)

mysql&gt; create database demo default character set utf8;
Query OK, 1 row affected (0.01 sec)

mysql&gt; use demo
Database changed
mysql&gt; create table user(id int(10) primary key auto_increment, name varchar(20));
Query OK, 0 rows affected (0.08 sec)

mysql&gt; show tables;
+----------------+
| Tables_in_demo |
+----------------+
| user           |
+----------------+
1 row in set (0.00 sec)

mysql&gt; insert into user values(default,&apos;张三丰&apos;),(default,&apos;江小白&apos;);
Query OK, 2 rows affected (0.02 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql&gt; select * from user;
+----+-----------+
| id | name      |
+----+-----------+
|  1 | 张三丰    |
|  2 | 江小白    |
+----+-----------+
2 rows in set (0.00 sec)</code></pre><h3 id="11、在服务器上如何批量操作sql语句"><a href="#11、在服务器上如何批量操作sql语句" class="headerlink" title="11、在服务器上如何批量操作sql语句"></a>11、在服务器上如何批量操作sql语句</h3><pre><code>拷贝sql脚本文件到服务器
在MySQL命令行中执行脚本文件：source /usr/local/tmp/xx.sql


在mysql有时执行了错误的update或者delete时导致大量数据错误恢复的办法。执行时没有开启事务，也没有对数据进行。这时就需要使用到sqlbinlog工具。

sqlbinlog需要开启，具体的打开方法就不说了。

使用sqlbinlog会产生bin文件，恢复就需要用到这些文件。文件中记录着数据库的所有操作。（此方法的操作是将数据库之前所执行的语句重新执行一次，以达到恢复效果）</code></pre><p>具体步骤：</p>
<pre><code>1，先找到bin文件，一般都是在mysql的data文件夹中，结尾以.00000X等形式结束。
2，寻找需要还原的时间点 使用语句   mysqlbinlog  文件名    例（MySQLbinlog xxbin.000001）来查看内容，然后找到对应的具体时间
3，导出sql语句，使用语句   文件名&gt;sql文件路径   例(mysqlbinlog xxxbin,00001&gt;&gt;a.sql mysql -u root -p
如果需要指定时间导出--start--date -stop=&apos;&apos; &apos; 来导出指定时间执行的语句例(sqlbinlog --start-stop=&apos;2015-11-22 10:00:00&apos;  xxbin.000001&gt;a.sql mysql -u root -p )这句意思是导出在2015-11-22 10点之前的语句，反之start是导出时间之后的。 和stop可以同时使用。
如果存在多个bin文件，则按照需要导出。
4，使用mysql将导出的语句执行一次。</code></pre>
      
    </div>
     <!-- 相关文章推荐 -->
    
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/tomcat/" rel="tag"># tomcat</a>
          
            <a href="/tags/linux/" rel="tag"># linux</a>
          
            <a href="/tags/mysql/" rel="tag"># mysql</a>
          
            <a href="/tags/jdk/" rel="tag"># jdk</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/09/14/Java%E4%B8%AD%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%BB%8B%E7%BB%8D/" rel="next" title="Java中数据结构算法介绍">
                <i class="fa fa-chevron-left"></i> Java中数据结构算法介绍
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/05/11/java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" rel="prev" title="java网络编程">
                java网络编程 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
<span class="jiathis_txt">分享到：</span>
<a class="jiathis_button_fav">收藏夹</a>
<a class="jiathis_button_copy">复制网址</a>
<a class="jiathis_button_email">邮件</a>
<a class="jiathis_button_weixin">微信</a>
<a class="jiathis_button_qzone">QQ空间</a>
<a class="jiathis_button_tqq">腾讯微博</a>
<a class="jiathis_button_douban">豆瓣</a>
<a class="jiathis_button_share">一键分享</a>

<a href="http://www.jiathis.com/share?uid=2140465" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
var jiathis_config={
  data_track_clickback:true,
  summary:"",
  shortUrl:false,
  hideMore:false
}
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=" charset="utf-8"></script>
<!-- JiaThis Button END -->
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://img.huyunshun.com/img/20200522182348.png"
                alt="初晨" />
            
              <p class="site-author-name" itemprop="name">初晨</p>
              <p class="site-description motion-element" itemprop="description">永远不要说你知道本质，更别说真相了。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">249</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">46</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">109</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          
<!--近期文章版块-->
            
                <div class="links-of-blogroll motion-element links-of-blogroll-block">
                  <div class="links-of-blogroll-title">
                    <!-- modify icon to fire by szw -->
                    <i class="fa fa-history fa-" aria-hidden="true"></i>
                    近期文章
                  </div>
                  <ul class="links-of-blogroll-list">
                    
                    
                      <li>
                        <a href="/2020/05/22/WebSocket%E3%80%81Socket%E3%80%81TCP%E3%80%81HTTP%E5%8C%BA%E5%88%AB/" title="WebSocket、Socket、TCP、HTTP区别" target="_blank">WebSocket、Socket、TCP、HTTP区别</a>
                      </li>
                    
                      <li>
                        <a href="/2020/05/19/Springboot%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%8E%A5%E5%8F%A3%E9%98%B2%E5%88%B7/" title="Springboot项目的接口防刷" target="_blank">Springboot项目的接口防刷</a>
                      </li>
                    
                      <li>
                        <a href="/2020/05/03/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Volatile%E5%85%B3%E9%94%AE%E5%AD%97%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" title="深入理解Volatile关键字及其实现原理" target="_blank">深入理解Volatile关键字及其实现原理</a>
                      </li>
                    
                      <li>
                        <a href="/2020/04/20/%E4%BD%BF%E7%94%A8vscode%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%AC%94%E8%AE%B0%E7%8E%AF%E5%A2%83/" title="使用vscode搭建个人笔记环境" target="_blank">使用vscode搭建个人笔记环境</a>
                      </li>
                    
                      <li>
                        <a href="/2020/01/20/HBase%E4%BB%8B%E7%BB%8D%E5%AE%89%E8%A3%85%E4%B8%8E%E6%93%8D%E4%BD%9C/" title="HBase介绍安装与操作" target="_blank">HBase介绍安装与操作</a>
                      </li>
                    
                  </ul>
                </div>
            
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#JDK"><span class="nav-number">1.</span> <span class="nav-text">JDK</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tomcat安装"><span class="nav-number">2.</span> <span class="nav-text">Tomcat安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MYSQL"><span class="nav-number">3.</span> <span class="nav-text">MYSQL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、复制MySQL道服务器-usr-local-tmp"><span class="nav-number">3.1.</span> <span class="nav-text">1、复制MySQL道服务器&#x2F;usr&#x2F;local&#x2F;tmp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、解压缩到-usr-local"><span class="nav-number">3.2.</span> <span class="nav-text">2、解压缩到&#x2F;usr&#x2F;local</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、创建用户和用户组"><span class="nav-number">3.3.</span> <span class="nav-text">3、创建用户和用户组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、赋权，让用户组合用户具有操作权限"><span class="nav-number">3.4.</span> <span class="nav-text">4、赋权，让用户组合用户具有操作权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、初始化（安装数据库注册服务）"><span class="nav-number">3.5.</span> <span class="nav-text">5、初始化（安装数据库注册服务）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6、修改配置文件"><span class="nav-number">3.6.</span> <span class="nav-text">6、修改配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7、命令行操作MySQL"><span class="nav-number">3.7.</span> <span class="nav-text">7、命令行操作MySQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8、设置root密码"><span class="nav-number">3.8.</span> <span class="nav-text">8、设置root密码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9、设置远程连接（外部访问数据库）"><span class="nav-number">3.9.</span> <span class="nav-text">9、设置远程连接（外部访问数据库）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10、一系列测试如下"><span class="nav-number">3.10.</span> <span class="nav-text">10、一系列测试如下</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11、在服务器上如何批量操作sql语句"><span class="nav-number">3.11.</span> <span class="nav-text">11、在服务器上如何批量操作sql语句</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Copyright</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  


</body>
</html>
