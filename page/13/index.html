<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="永远不要说你知道本质，更别说真相了。">
<meta property="og:type" content="website">
<meta property="og:title" content="简">
<meta property="og:url" content="https://huyunshun.com/page/13/index.html">
<meta property="og:site_name" content="简">
<meta property="og:description" content="永远不要说你知道本质，更别说真相了。">
<meta property="article:author" content="初晨">
<meta property="article:tag" content="编程">
<meta property="article:tag" content="开发">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://huyunshun.com/page/13/"/>





  <title>简</title>
  








  <script type="text/javascript" src="/js/src/love.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">

  <!-- 看板娘 -->
    
        <script async src="/live2d-widget/autoload.js"></script>
    
 <!-- 飘动的彩带） -->
  <script src="/js/src/piao.js" type="text/javascript"></script>
<meta name="generator" content="Hexo 4.2.1"></head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">简</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">人生短暂，学海无边，而大道至简。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huyunshun.com/2018/09/01/Tomcat%E6%9E%B6%E6%9E%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="初晨">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img.huyunshun.com/img/20200522182348.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="简">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/01/Tomcat%E6%9E%B6%E6%9E%84/" itemprop="url">Tomcat架构</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-09-01T00:00:00+08:00">
                2018-09-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Tomcat/" itemprop="url" rel="index">
                    <span itemprop="name">Tomcat</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Tomcat历史"><a href="#Tomcat历史" class="headerlink" title="Tomcat历史"></a>Tomcat历史</h2><p>Tomcat最初有sun公司的架构师James Duncan Davidson开发，名称“JavaWebServer” 1999与Apache软件基金会旗下的JServ项目合并，也就是Tomcat。2001 tomcat4.0  里程碑式的版本。完全重新设计了其架构，并实现了Servlet2.3和JSP 1.2规范。到目前，Tomcat已经成为成熟的Servlet容器产品，并作为 JBoss等应用的服务器的内嵌Servlet容器。</p>
<h2 id="总体结构（结构演变理解）"><a href="#总体结构（结构演变理解）" class="headerlink" title="总体结构（结构演变理解）"></a>总体结构（结构演变理解）</h2><h3 id="1、最简单的结构"><a href="#1、最简单的结构" class="headerlink" title="1、最简单的结构"></a>1、最简单的结构</h3><p>Server<br>接受请求并解析，完成相关任务，返回处理结果通常情况下使用Socket监听服务器指定端口来实现该功能，一个最简单的服务设计如下方法：</p>
<ul>
<li>Start()：启动服务器，打开socket连接，监听服务端口，接受客户端请求、处理、返回响应</li>
<li>Stop()：关闭服务器，释放资源<br>缺点：请求监听和请求处理放一起扩展性很差（协议的切换 tomcat独立部署使用HTTP协议，与Apache集成时使用AJP协议）</li>
</ul>
<p>改进：网络协议与请求处理分离</p>
<h3 id="2、Connector和Container"><a href="#2、Connector和Container" class="headerlink" title="2、Connector和Container"></a>2、Connector和Container</h3><p>一个Server包含多个Connector（链接器）和Container（容器）</p>
<p>Connector：开启Socket并监听客户端请求，返回响应数据；Container：负责具体的请求处。</p>
<p>缺点：Connector接受的请求由那个Container处理，需要建立映射规则</p>
<p>改进：一个Server可以包含多个Service，每一个Service都是独立的，他们共享一个JVM以及系统类库。</p>
<h3 id="3、Server包含多个Service"><a href="#3、Server包含多个Service" class="headerlink" title="3、Server包含多个Service"></a>3、Server包含多个Service</h3><p>一个Service负责维护多个Connector和一个Container，这样来自Connector的请求只能有它所属的Service维护的Container处理。</p>
<p>在这里Container是一个通用的概念，为了明确功能，并与Tomcat中的组件名称相同，可以将Container命名为Engineer</p>
<h3 id="4、Engine、Context"><a href="#4、Engine、Context" class="headerlink" title="4、Engine、Context"></a>4、Engine、Context</h3><p>在Engine容器中需要支持管理WEB应用，当接收到Connector的处理请求时，Engine容器能够找到一个合适的Web应用来处理，因此在上面设计的基础上增加Context来表示一个WEB应用，并且一个Engine可以包含多个Context。</p>
<p>缺点：应用服务器需要将每个域名抽象为一个虚拟主机，</p>
<h3 id="5、Host、Wrapper"><a href="#5、Host、Wrapper" class="headerlink" title="5、Host、Wrapper"></a>5、Host、Wrapper</h3><p>通常在一个主机下，提供多个域名的服务，因此引入Host</p>
<p>在一个web应用中，可以包含多个Servlet实例来处理来自不同的链接请求，因此我们还需要一个组件概念来表示Servlet定义，即Wrapper。</p>
<p><img src="https://img.huyunshun.com/img/20200404205355.png" alt="20200404205355"></p>
<p>在前面的Container容器中，Engine、Host、Context、Wrapper是一类组件，这类组件的作用就是处理接收客户端的请求并且返回响应数据，并且有可能请求到Engine容器，Engine容器委托给子容器Host处理。</p>
<p><img src="https://img.huyunshun.com/img/20200404210742.png" alt="20200404210742"></p>
<p>使用Container代表容器，Engine、Host、Context、Wrapper都是Container的子容器，Container可以维护子容器。backgroundProcess()方法针对后台处理，并且其基础抽象类(ContainerBase)确保在启动组件的同时，异步启动后台处理。</p>
<p>容器之间的组合关系是一种弱依赖，用虚线表示。</p>
<p>每一个组件都有启动、停止等生命周期方法，拥有生命周期的特征。所以定义一个通用的LifeCycle接口，</p>
<p><img src="https://img.huyunshun.com/img/20200404210830.png" alt="20200404210830"></p>
<p><img src="https://img.huyunshun.com/img/20200404205607.png" alt="20200404205607"></p>
<h2 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h2><h3 id="连接器Connector"><a href="#连接器Connector" class="headerlink" title="连接器Connector"></a>连接器Connector</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">监听服务器端口，读取来自客户端的请求</span><br><span class="line">使用指定的协议解析请求数据</span><br><span class="line">根据请求地址匹配正确的容器解析处理</span><br><span class="line">讲响应返回给客户端</span><br></pre></td></tr></table></figure>
<p>连接器需要完成 3 个高内聚的功能：</p>
<ul>
<li>网络通信。</li>
<li>应用层协议解析。</li>
<li>Tomcat Request/Response 与 ServletRequest/ServletResponse 的转化。</li>
</ul>
<p>因此 Tomcat 的设计者设计了 3 个组件来实现这 3 个功能，分别是 EndPoint、Processor 和 Adapter。</p>
<p>Endpoint 和 Processor 放在一起抽象成了 ProtocolHandler 组件，连接器用 ProtocolHandler 来处理网络连接和应用层协议。</p>
<p><img src="https://img.huyunshun.com/img/20200404215946.png" alt="20200404215946"></p>
<p>EndPoint 是一个接口，它的抽象实现类 AbstractEndpoint 里面定义了两个内部类：Acceptor 和 SocketProcessor。其中 Acceptor 用于监听 Socket 连接请求。SocketProcessor 用于处理接收到的 Socket 请求。</p>
<p>EndPoint 接收到 Socket 连接后，生成一个 SocketProcessor 任务提交到线程池去处理，SocketProcessor 的 Run 方法会调用 Processor 组件去解析应用层协议，Processor 通过解析生成 Request 对象后，会调用 Adapter 的 Service 方法。</p>
<p><img src="https://img.huyunshun.com/img/20200404220033.png" alt="20200404220033"></p>
<h3 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h3><p>Tomcat 设计了 4 种容器，分别是 Engine、Host、Context 和 Wrapper。这 4 种容器不是平行关系，而是父子关系。</p>
<p>Context 表示一个 Web 应用程序；Wrapper 表示一个 Servlet，一个 Web 应用程序中可能会有多个 Servlet；Host 代表的是一个虚拟主机，或者说一个站点，可以给 Tomcat 配置多个虚拟主机地址，而一个虚拟主机下可以部署多个 Web 应用程序；Engine 表示引擎，用来管理多个虚拟站点，一个 Service 最多只能有一个 Engine。</p>
<p>请求定位 Servlet 的过程：Tomcat 会创建一个 Service 组件和一个 Engine 容器组件，在 Engine 容器下创建两个 Host 子容器，在每个 Host 容器下创建两个 Context 子容器。由于一个 Web 应用通常有多个 Servlet，Tomcat 还会在每个 Context 容器里创建多个 Wrapper 子容器。</p>
<p><img src="https://img.huyunshun.com/img/20200404220250.png" alt="20200404220250"></p>
<p>一个请求在 Tomcat 中流转的过程：</p>
<p><img src="https://img.huyunshun.com/img/20200404220834.png" alt="20200404220834"></p>
<p>startup.sh 启动 tomcat 的过程：</p>
<p><img src="https://img.huyunshun.com/img/20200404220908.png" alt="20200404220908"></p>
<h3 id="Coyote"><a href="#Coyote" class="headerlink" title="Coyote"></a>Coyote</h3><p>CyoOt是Tomcat的一个连接器组件，支持ajp、http1.1、spdy三种协议。</p>
<h4 id="1、http"><a href="#1、http" class="headerlink" title="1、http"></a>1、http</h4><p>默认情况下，HTTP连接器使用Tomcat进行安装，并准备使用。该连接器具有最低的等待时间和最佳的整体性能。<br>对于集群，必须安装支持Web会话粘性的HTTP负载平衡器，以将流量引导到Tomcat服务器。Tomcat支持Adache HTTP Server 2 .x上的MODJOXER代理，并在默认情况下包含在Apache HTTP服务器2.2中作为负载均衡器。应该注意的是，HTTP代理的性能通常低于AJP的性能，所以AJP聚类通常是优选的。</p>
<h4 id="2、ajp"><a href="#2、ajp" class="headerlink" title="2、ajp"></a>2、ajp</h4><p>当使用单个服务器时，在Tomcat实例前面使用 native webserver时的性能大部分时间都比具有默认HTTP连接器的独立Tomcat更差，即使Web应用程序的很大一部分是由静态文件构成的。如果出于任何原因需要与本机WebServer集成，AJP连接器将提供比代理HTTP更快的性能。从Tomcat的角度来看，AJP聚类是最有效的。它在功能上等同于HTTP集群。</p>
<h3 id="Jasper"><a href="#Jasper" class="headerlink" title="Jasper"></a>Jasper</h3><p>Tomcat的JSP引擎。解析JSP文件编译成java代码的servlet（可以处理卡特琳娜）。在运行时，Jasper检测到对JSP文件的更改并重新编译它们。</p>
<h3 id="Pipeline和Value"><a href="#Pipeline和Value" class="headerlink" title="Pipeline和Value"></a>Pipeline和Value</h3><p> 对于应用服务器来说，增强各组件的扩展性以及灵活性是非常重要的，Tomcat采用职责链模式来实现每个Container组件处理请求的功能。</p>
<p>Pipeline代表职责链，后者表示阀门，具体的处理过程，每条线路上包含哪些操作，操作按照顺序一个个执行。Tomcat通过这种方式来决定每个容器的执行过程。</p>
<p>每一个容器都有一个 Pipeline 对象。</p>
<p><img src="https://img.huyunshun.com/img/20200404220801.png" alt="20200404220801"></p>
<p>Tomcat监听客户端的请求，获得请求后交个各个组件去处理，返回响应数据到客户端，并且Tomcat能支持HTTP、AJP等协议。并且在扩展性、可用性上有着非常优秀的设计。</p>
<h3 id="启动流程"><a href="#启动流程" class="headerlink" title="启动流程"></a>启动流程</h3><p>tomcat的启动流程很标准化，入口是BootStrap，统一按照生命周期管理接口Lifecycle的定义进行启动。首先，调用init()方法逐级初始化，接着调用start()方法进行启动，同时，每次调用伴随着生命周期状态变更事件的触发。</p>
<p><img src="https://img.huyunshun.com/img/20200405225231.png" alt="20200405225231"></p>
<h3 id="请求流程"><a href="#请求流程" class="headerlink" title="请求流程"></a>请求流程</h3><p>如果请求为：<a href="http://localhost:8080/index.jsp" target="_blank" rel="noopener">http://localhost:8080/index.jsp</a></p>
<ol>
<li>请求被发送到本机端口8080，被在那里侦听的Coyote HTTP/1.1 Connector连接器组件获得</li>
<li>Connector把该请求交给它所在的Service的Engine来处理，并等待Engine的回应</li>
<li>Engine获得请求localhost:8080/index.jsp，匹配它所有虚拟主机Host</li>
<li>Engine匹配到名为localhost的Host（即使匹配不到也把请求交给该Host处理，因为该Host被定义为该Engine的默认主机）</li>
<li>localhost Host获得请求/index.jsp，匹配它所拥有的所有Context</li>
<li>Host匹配到路径为/的Context，path=”/“的Context获得请求/index.jsp，在它的mapping table中寻找对应的servlet</li>
<li>Context匹配到URL PATTERN为*.jsp的servlet，对应于JspServlet类</li>
<li>构造HttpServletRequest对象和HttpServletResponse对象，作为参数调用JspServlet的doGet或doPost方法</li>
<li>Context把执行完了之后的HttpServletResponse对象返回给Host</li>
<li>Host把HttpServletResponse对象返回给Engine</li>
<li>Engine把HttpServletResponse对象返回给Connector</li>
<li>Connector把HttpServletResponse对象返回给客户browser<h2 id="类加载机制"><a href="#类加载机制" class="headerlink" title="类加载机制"></a>类加载机制</h2>tomcat自定义了三种类加载器。commonLoader、catalinaLoader、sharedLoader。</li>
</ol>
<ul>
<li>commonLoader：Tomcat最基本的类加载器，加载路径中的class可以被Tomcat容器本身以及各个Webapp访问；</li>
<li>catalinaLoader：Tomcat容器私有的类加载器，加载路径中的class对于Webapp不可见；</li>
<li>sharedLoader：各个Webapp共享的类加载器，加载路径中的class对于所有Webapp可见，但是对于Tomcat容器不可见；</li>
<li>WebappClassLoader：各个Webapp私有的类加载器，加载路径中的class只对当前Webapp可见；</li>
</ul>
<p>jvm加载器加载机制是双亲委派模型，tomcat 为了实现隔离性，没有遵守这个约定，每个webappClassLoader加载自己的目录下的class文件，不会传递给父类加载器。</p>
<p>Tomcat8 和 Tomcat6比较大的区别是 ：Tomcat8可以通过配置 <Loader delegate="true"/>不打破双亲委托 ，类的加载顺序略不同<br><img src="https://img.huyunshun.com/img/20200405170917.png" alt="20200405170917"></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Server:代表整个Servlet容器</span><br><span class="line">Service：代表Connector集合、Container容器。多个Connector对应一个Container</span><br><span class="line">Container：通用的容器。</span><br><span class="line">Connector：链接器</span><br><span class="line">Engine：Servlet引擎</span><br><span class="line">Host：主机映射</span><br><span class="line">Context：webAPP</span><br><span class="line">Wrapper：代表Servlet</span><br><span class="line">Executor：线程池</span><br></pre></td></tr></table></figure>
<p>以上的配置在Server.xml文件中</p>

          
        
      
    </div>
     <!-- 相关文章推荐 -->
    
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huyunshun.com/2018/08/31/spring-boot%E5%AE%9E%E7%8E%B0websocket/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="初晨">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img.huyunshun.com/img/20200522182348.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="简">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/31/spring-boot%E5%AE%9E%E7%8E%B0websocket/" itemprop="url">spring-boot实现websocket</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-31T21:35:40+08:00">
                2018-08-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/websocket/" itemprop="url" rel="index">
                    <span itemprop="name">websocket</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h2><p>服务端的实现，通常有两种方式：</p>
<p>一种用@ServerEndPoint注解来实现；第二种通过请求参数传递采方式，服务端的参数在拦截器中获取之后通过attributes传递给WebSocketHandler，可以添加拦截器在WebSocket连接建立和断开前进行一些其他操作。</p>
<p>其实第一种也就是前面说过的java封装的一种实现。因为在spring-boot中，需要把类注册到容器，还需要配置：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自动注册所有@ServerEndpoint注解声明的WebsocketEndpoint</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSocketConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServerEndpointExporter <span class="title">serverEndpointExporter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ServerEndpointExporter();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@ServerEndpoint实现的时候，可能会出现注入失败的问题，可以通过手动注入的方式来解决。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ConfigurableApplicationContext applicationContext = <span class="keyword">new</span> SpringApplication(Application<span class="class">.<span class="keyword">class</span>).<span class="title">run</span>(<span class="title">args</span>)</span>;</span><br><span class="line">WebSocketController.setApplicationContext(applicationContext);  <span class="comment">// 再在WebSocketController中获取Bean</span></span><br></pre></td></tr></table></figure>

<p>第二种实现就是和spring差不多，实现WebSocketHandler，或者更有可能扩展TextWebSocketHandler或BinaryWebSocketHandler。</p>
<p>示例：</p>
<p>pom：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringBoot-websocket<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-websocket<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.java-websocket<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Java-WebSocket<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>java：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="meta">@EnableWebSocket</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSocketConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span>,<span class="title">WebSocketConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> WebSocketController webSocketController;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerWebSocketHandlers</span><span class="params">(WebSocketHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addHandler(webSocketController, <span class="string">"/webSocket"</span>)</span><br><span class="line">                .addInterceptors(<span class="keyword">new</span> HandShakeInterceptor()).setAllowedOrigins(<span class="string">"*"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//拦截器</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HandShakeInterceptor</span> <span class="keyword">extends</span> <span class="title">HttpSessionHandshakeInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(HandShakeInterceptor<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 在WebSocket连接建立之前的操作，以鉴权为例</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">beforeHandshake</span><span class="params">(ServerHttpRequest request, ServerHttpResponse response,</span></span></span><br><span class="line"><span class="function"><span class="params">                                   WebSocketHandler wsHandler, Map&lt;String, Object&gt; attributes)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//一些鉴权操作</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterHandshake</span><span class="params">(ServerHttpRequest request, ServerHttpResponse response,</span></span></span><br><span class="line"><span class="function"><span class="params">                               WebSocketHandler wsHandler, Exception ex)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//控制器</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSocketController</span> <span class="keyword">implements</span> <span class="title">WebSocketHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> AtomicInteger onlineCount = <span class="keyword">new</span> AtomicInteger(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ArrayList&lt;WebSocketSession&gt; sessions = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Logger LOGGER = LoggerFactory.getLogger(WebSocketController<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterConnectionEstablished</span><span class="params">(WebSocketSession session)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        sessions.add(session);</span><br><span class="line">        <span class="keyword">int</span> onlineNum = onlineCount.incrementAndGet();</span><br><span class="line">        LOGGER.info(<span class="string">"打开连接，目前连接数: "</span> + onlineNum);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterConnectionClosed</span><span class="params">(WebSocketSession session, CloseStatus status)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        sessions.remove(session);</span><br><span class="line">        <span class="keyword">int</span> onlineNum = onlineCount.decrementAndGet();</span><br><span class="line">        LOGGER.info(<span class="string">"连接关闭: "</span> + onlineNum);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(WebSocketSession wsSession, WebSocketMessage&lt;?&gt; message)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        LOGGER.info(<span class="string">"收到的消息: "</span> + message.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleTransportError</span><span class="params">(WebSocketSession session, Throwable exception)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        LOGGER.error(<span class="string">"连接错误"</span>);</span><br><span class="line">        <span class="keyword">if</span> (session.isOpen()) &#123;</span><br><span class="line">            session.close();</span><br><span class="line">        &#125;</span><br><span class="line">        sessions.remove(session);</span><br><span class="line">        onlineCount.decrementAndGet();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 是否支持消息拆分发送：如果接收的数据量比较大，最好打开(true), 否则可能会导致接收失败。</span></span><br><span class="line"><span class="comment">     * 如果出现WebSocket连接接收一次数据后就自动断开，可能这里由问题。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">supportsPartialMessages</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(<span class="string">"com.hu.demo"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(App<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>启动</p>
<h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><p>客户端的实现，通常有html和java WebSocketClient两种方式，html前面已经有，这里用client实现一下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSocketClientDemo</span> <span class="keyword">extends</span> <span class="title">WebSocketClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WebSocketClientDemo</span><span class="params">(String url)</span> <span class="keyword">throws</span> URISyntaxException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(<span class="keyword">new</span> URI(url));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WebSocketClientDemo</span><span class="params">(URI serverUri, Draft protocolDraft)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(serverUri, protocolDraft);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onOpen</span><span class="params">(ServerHandshake shake)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"握手..."</span>);</span><br><span class="line">        <span class="keyword">for</span> (Iterator&lt;String&gt; it = shake.iterateHttpFields(); it.hasNext(); ) &#123;</span><br><span class="line">            String key = it.next();</span><br><span class="line">            System.out.println(key + <span class="string">":"</span> + shake.getFieldValue(key));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMessage</span><span class="params">(String paramString)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"接收到消息："</span> + paramString);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClose</span><span class="params">(<span class="keyword">int</span> paramInt, String paramString, <span class="keyword">boolean</span> paramBoolean)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"关闭..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Exception e)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"异常"</span> + e);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        String serverUrl = <span class="string">"ws://127.0.0.1:8080/webSocket"</span>;</span><br><span class="line">        URI recognizeUri = <span class="keyword">new</span> URI(serverUrl);</span><br><span class="line">        WebSocketClientDemo client = <span class="keyword">new</span> WebSocketClientDemo(recognizeUri, <span class="keyword">new</span> Draft_6455());</span><br><span class="line">        client.connect();</span><br><span class="line">        <span class="keyword">while</span> (!client.getReadyState().equals(WebSocket.READYSTATE.OPEN)) &#123;</span><br><span class="line">            System.out.println(<span class="string">"未打开"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"建立websocket连接"</span>);</span><br><span class="line">        client.send(<span class="string">"hello"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">未打开</span><br><span class="line">未打开</span><br><span class="line">未打开</span><br><span class="line">未打开</span><br><span class="line">未打开</span><br><span class="line">未打开</span><br><span class="line">握手...</span><br><span class="line">已经连接</span><br><span class="line">Connection:upgrade</span><br><span class="line">Date:Sat, 04 Apr 2020 09:26:08 GMT</span><br><span class="line">Sec-WebSocket-Accept:SIBN8X8GwCVQmjNH1VNNZnr+WY4&#x3D;</span><br><span class="line">Upgrade:websocket</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
     <!-- 相关文章推荐 -->
    
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huyunshun.com/2018/08/31/WebSocket%E7%9A%84spring%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="初晨">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img.huyunshun.com/img/20200522182348.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="简">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/31/WebSocket%E7%9A%84spring%E5%AE%9E%E7%8E%B0/" itemprop="url">WebSocket的spring实现</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-31T00:00:00+08:00">
                2018-08-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/websocket/" itemprop="url" rel="index">
                    <span itemprop="name">websocket</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Spring Framework 提供了一个 WebSocket API，您可以使用它来编写处理 WebSocket 消息的 client-和 server-side applications。</p>
<h1 id="WebSocket-API"><a href="#WebSocket-API" class="headerlink" title="WebSocket API"></a>WebSocket API</h1><h2 id="1-WebSocketHandler"><a href="#1-WebSocketHandler" class="headerlink" title="1. WebSocketHandler"></a>1. WebSocketHandler</h2><p>创建 WebSocket 服务器就像实现WebSocketHandler一样简单，或者更有可能扩展TextWebSocketHandler或BinaryWebSocketHandler。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyHandler</span> <span class="keyword">implements</span> <span class="title">WebSocketHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = Logger.getLogger(MyHandler<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> AtomicInteger connectionIds = <span class="keyword">new</span> AtomicInteger(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, WebSocketSession&gt; connections = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> String userId;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 建立连接时候触发</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterConnectionEstablished</span><span class="params">(WebSocketSession session)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        logger.debug(<span class="string">"连接成功！"</span>);</span><br><span class="line">        <span class="keyword">this</span>.userId = <span class="string">"user"</span> + connectionIds.getAndIncrement();</span><br><span class="line">        session.getAttributes().put(userId, userId);</span><br><span class="line">        connections.putIfAbsent(userId, session);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 处理消息</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(WebSocketSession webSocketSession, WebSocketMessage&lt;?&gt; webSocketMessage)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 防止中文乱码</span></span><br><span class="line">        String msg = URLDecoder.decode(webSocketMessage.getPayload().toString(), <span class="string">"utf-8"</span>);</span><br><span class="line">        <span class="comment">// 简单模拟群发消息</span></span><br><span class="line">        TextMessage reply = <span class="keyword">new</span> TextMessage(userId + <span class="string">" : "</span> + msg);</span><br><span class="line">        connections.forEach((s, session) -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                session.sendMessage(reply);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleTransportError</span><span class="params">(WebSocketSession webSocketSession, Throwable throwable)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (webSocketSession.isOpen()) &#123;</span><br><span class="line">            webSocketSession.close();</span><br><span class="line">        &#125;</span><br><span class="line">        logger.debug(<span class="string">"连接出错...关闭！"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 关闭连接时候触发</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterConnectionClosed</span><span class="params">(WebSocketSession webSocketSession, CloseStatus closeStatus)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        connections.remove(userId);</span><br><span class="line">        logger.debug(<span class="string">"连接关闭！"</span> + closeStatus.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">supportsPartialMessages</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用xml或者Java配置方式配置Bean。</p>
<h2 id="2-WebSocket-握手"><a href="#2-WebSocket-握手" class="headerlink" title="2.WebSocket 握手"></a>2.WebSocket 握手</h2><p>自定义初始 HTTP WebSocket 握手请求的最简单方法是通过HandshakeInterceptor，它在握手之前“之前”和“之后”暴露方法。您可以使用此类拦截器来阻止握手或使WebSocketSession可以使用任何属性。以下 example 使用 built-in 拦截器将 HTTP session 属性传递给 WebSocket session：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 配置WebSocket  也可以使用xml配置</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Spring 的 WebSocket 支持不依赖于 Spring MVC。在WebSocketHttpRequestHandler的帮助下将WebSocketHandler集成到其他 HTTP 服务环境中相对简单。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSocket</span> <span class="comment">// 开启websocket</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSocketConfig</span> <span class="keyword">implements</span> <span class="title">WebSocketConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 自定义初始 HTTP WebSocket 握手请求的最简单方法是通过HandshakeInterceptor，它将握手方法“之前”和“之后”。</span></span><br><span class="line"><span class="comment">     * 这样的拦截器可用于排除握手或使WebSocketSession可用的任何属性。用于将 HTTP session 属性传递给 WebSocket session：</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerWebSocketHandlers</span><span class="params">(WebSocketHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addHandler(myHandler(), <span class="string">"/myHandler"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WebSocketHandler <span class="title">myHandler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyHandler();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//HttpSessionHandshakeInterceptor拦截器，也可以选择使用。</span></span><br></pre></td></tr></table></figure>
<h2 id="3-部署"><a href="#3-部署" class="headerlink" title="3. 部署"></a>3. 部署</h2><p>web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"3.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>websocket<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springMVCConfig.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--处理乱码--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="4-服务器-Configuration"><a href="#4-服务器-Configuration" class="headerlink" title="4. 服务器 Configuration"></a>4. 服务器 Configuration</h2><p>每个底层 WebSocket 引擎都会公开控制运行时特征的 configuration properties，例如消息缓冲区大小，idle 超时等等。</p>
<p>对于 Tomcat，WildFly 和 GlassFish，您可以将ServletServerContainerFactoryBean添加到 WebSocket Java 配置中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServletServerContainerFactoryBean <span class="title">createWebSocketContainer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ServletServerContainerFactoryBean container = <span class="keyword">new</span> ServletServerContainerFactoryBean();</span><br><span class="line">    container.setMaxTextMessageBufferSize(<span class="number">8192</span>);</span><br><span class="line">    container.setMaxBinaryMessageBufferSize(<span class="number">8192</span>);</span><br><span class="line">    <span class="keyword">return</span> container;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-跨域问题"><a href="#5-跨域问题" class="headerlink" title="5.跨域问题"></a>5.跨域问题</h2><p>从 Spring Framework 4.1.5 开始，WebSocket 和 SockJS 的默认行为是仅接受 same-origin 请求。也可以允许所有或指定的起源列表。</p>
<p>三种情况：</p>
<ul>
<li>仅允许 same-origin 个请求(默认)：在此模式下，启用 SockJS 时，Iframe HTTP 响应头X-Frame-Options设置为SAMEORIGIN，并且禁用 JSONP 传输，因为它不允许检查请求的来源。因此，启用此模式时不支持 IE6 和 IE7。</li>
<li>允许指定的原始列表：每个允许的原点必须以http://或https://开头。在此模式下，启用 SockJS 时，将禁用 IFrame 传输。因此，启用此模式时，不支持 IE6 到 IE9。</li>
<li>允许所有来源：要启用此模式，您应提供*作为允许的原始值。在此模式下，所有传输都可用。</li>
</ul>
<p>配置 WebSocket 和 SockJS 允许的源：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerWebSocketHandlers</span><span class="params">(WebSocketHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">    registry.addHandler(myHandler(), <span class="string">"/myHandler"</span>).setAllowedOrigins(<span class="string">"http://mydomain.com"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="SockJS"><a href="#SockJS" class="headerlink" title="SockJS"></a>SockJS</h1><p>有一些浏览器中缺少对WebSocket的支持，而SockJS是一个浏览器的JavaScript库，它提供了一个类似于网络的对象，SockJS提供了一个连贯的，跨浏览器的JavaScriptAPI，它在浏览器和Web服务器之间创建了一个低延迟、全双工、跨域通信通道。SockJS的一大好处在于提供了浏览器兼容性。即优先使用原生WebSocket，如果浏览器不支持WebSocket，会自动降为轮询的方式。</p>
<p><strong>启用 SockJS</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerWebSocketHandlers</span><span class="params">(WebSocketHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">    registry.addHandler(myHandler(), <span class="string">"/myHandler"</span>).withSockJS();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
     <!-- 相关文章推荐 -->
    
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huyunshun.com/2018/08/31/WebSocket%E5%8E%9F%E7%90%86%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="初晨">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img.huyunshun.com/img/20200522182348.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="简">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/31/WebSocket%E5%8E%9F%E7%90%86%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%AE%9E%E7%8E%B0/" itemprop="url">WebSocket原理和实现</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-31T00:00:00+08:00">
                2018-08-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/websocket/" itemprop="url" rel="index">
                    <span itemprop="name">websocket</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="简单介绍"><a href="#简单介绍" class="headerlink" title="简单介绍"></a>简单介绍</h2><p>WebSocket 协议在2008年诞生，2011年成为国际标准。现在所有浏览器都已经支持了。WebSocket 的最大特点就是，服务器可以主动向客户端推送信息，客户端也可以主动向服务器发送信息，双工模式。</p>
<p>WebSocket是HTML5出（协议），也就是说HTTP协议没有变化，或者说没关系，但HTTP是不支持持久连接的（长连接，循环连接的不算）HTTP 有 1.1 和 1.0 之说，也就是所谓的 keep-alive ，把多个 HTTP 请求合并为一个，但是 Websocket 其实是一个新协议，跟 HTTP 协议基本没有关系，只是为了兼容现有浏览器，所以在握手阶段使用了 HTTP 。</p>
<p><img src="https://img.huyunshun.com/img/20200328182707.png" alt="20200328182707"></p>
<p>Websocket是一个持久化的协议，相对于HTTP这种非持久的协议来说。</p>
<p>WebSocket 建立在 TCP 协议之上，服务器端的实现比较容易。与 HTTP 协议有着良好的兼容性。默认端口也是80和443，并且握手阶段采用 HTTP 协议，因此握手时不容易屏蔽，能通过各种 HTTP 代理服务器。</p>
<p>数据格式比较轻量，性能开销小，通信高效。可以发送文本，也可以发送二进制数据。没有同源限制，客户端可以与任意服务器通信。协议标识符是ws（如果加密，则为wss），服务器网址就是 URL。</p>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>首先 WebSocket 是基于 HTTP 协议的，或者说借用了 HTTP 协议来完成一部分握手。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET &#x2F;chat HTTP&#x2F;1.1</span><br><span class="line">Host: server.example.com</span><br><span class="line">Upgrade: websocket</span><br><span class="line">Connection: Upgrade</span><br><span class="line">Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw&#x3D;&#x3D;</span><br><span class="line">Sec-WebSocket-Protocol: chat, superchat</span><br><span class="line">Sec-WebSocket-Version: 13</span><br><span class="line">Origin: http:&#x2F;&#x2F;example.com</span><br></pre></td></tr></table></figure>
<p>这段类似 HTTP 协议的握手请求中，多了这么几个东西。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Upgrade: websocket</span><br><span class="line">Connection: Upgrade</span><br></pre></td></tr></table></figure>
<p>这就是 WebSocket 的核心了，告诉 Apache 、 Nginx 等服务器，发起的请求要用 WebSocket 协议，找到对应处理而不是 HTTP。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw&#x3D;&#x3D;</span><br><span class="line">Sec-WebSocket-Protocol: chat, superchat</span><br><span class="line">Sec-WebSocket-Version: 13</span><br></pre></td></tr></table></figure>
<p>首先， Sec-WebSocket-Key 是一个 Base64 encode 的值，这个是浏览器随机生成的，告诉服务器来验证是否是WebSocket服务。</p>
<p>然后， Sec_WebSocket-Protocol 是一个用户定义的字符串，用来区分同 URL 下，不同的服务所需要的协议。</p>
<p>最后， Sec-WebSocket-Version 是告诉服务器所使用的 WebSocket Draft （协议版本），在最初的时候，WebSocket 协议还在 Draft 阶段，各种不同的协议都有，Firefox 和 Chrome 用的不是一个版本之类的，当初 WebSocket 协议太多可是一个大难题。</p>
<p>然后服务器会返回下列东西，表示已经接受到请求， 成功建立 WebSocket：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HTTP&#x2F;1.1 101 Switching Protocols</span><br><span class="line">Upgrade: websocket</span><br><span class="line">Connection: Upgrade</span><br><span class="line">Sec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk&#x3D;</span><br><span class="line">Sec-WebSocket-Protocol: chat</span><br></pre></td></tr></table></figure>
<p>这里开始就是 HTTP 最后负责的部分。告诉了客户端，成功转换协议WebSocket协议。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Upgrade: websocket</span><br><span class="line">Connection: Upgrade</span><br></pre></td></tr></table></figure>
<p>告诉客户端即将升级的是 WebSocket 协议。 Sec-WebSocket-Accept 这个则是经过服务器确认，并且加密过后的 Sec-WebSocket-Key ， Sec-WebSocket-Protocol 则是表示最终使用的协议。</p>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>在没有WebSocket之前，我们是怎么处理长连接的情况，是使用ajax轮询 和 long poll。大多数 Web 应用程序将通过频繁的异步 JavaScript 和 XML（AJAX）请求实现长轮询。轮询的效率低，非常浪费资源（因为必须不停连接，或者 HTTP 连接始终打开）。</p>
<ul>
<li>ajax轮询<br>ajax轮询的原理非常简单，让浏览器隔个几秒就发送一次请求，询问服务器是否有新信息。</li>
<li>poll<br>long poll 其实原理跟 ajax轮询 差不多，都是采用轮询的方式，不过采取的是阻塞模型，客户端发起请求后，如果没消息，就一直不返回 Response 给客户端。直到有消息才返回，返回完之后，客户端再次建立连接，周而复始。</li>
</ul>
<p>这两种方式，都是在不断地建立HTTP连接，然后等待服务端处理，可以体现HTTP协议的另外一个特点，被动性：服务端不能主动联系客户端，只能有客户端发起。</p>
<p>ajax轮询 需要服务器有很快的处理速度和资源。long poll 需要有很高的并发。</p>
<ul>
<li>WebSocket 如何工作？</li>
</ul>
<p>Web 浏览器和服务器都必须实现 WebSockets 协议来建立和维护连接。由于 WebSockets 连接长期存在，与典型的 HTTP 连接不同，对服务器有重要的影响。</p>
<p>基于多线程或多进程的服务器无法适用于 WebSockets，因为它旨在打开连接，尽可能快地处理请求，然后关闭连接。任何实际的 WebSockets 服务器端实现都需要一个异步服务器。</p>
<h3 id="WebSocket-客户端"><a href="#WebSocket-客户端" class="headerlink" title="WebSocket 客户端"></a>WebSocket 客户端</h3><p>在客户端，没有必要为 WebSockets 使用 JavaScript 库。实现 WebSockets 的 Web 浏览器将通过 WebSockets 对象实现客户端功能（Html5已经实现了WebSocket）。</p>
<h4 id="API"><a href="#API" class="headerlink" title="API"></a>API</h4><p>以下 API 用于创建 WebSocket 对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一个参数 url, 指定连接的 URL。第二个参数 protocol 是可选的，指定了可接受的子协议。</span></span><br><span class="line"><span class="keyword">var</span> Socket = <span class="keyword">new</span> WebSocket(url, [protocol] );</span><br></pre></td></tr></table></figure>
<p><strong>WebSocket 属性</strong><br>属性 | 描述<br>——- | ——-<br>Socket.readyState | 只读属性 readyState 表示连接状态，CONNECTING：值为0，表示正在连接。OPEN：值为1，表示连接成功，可以通信了。CLOSING：值为2，表示连接正在关闭。CLOSED：值为3，表示连接已经关闭，或者打开连接失败。<br>Socket.bufferedAmount | 只读属性 bufferedAmount 已被 send() 放入正在队列中等待传输，但是还没有发出的 UTF-8 文本字节数。<br><strong>WebSocket 事件</strong><br>事件 | 事件处理程序 | 描述<br>——- | ——- | ——-<br>open | Socket.onopen | 连接建立时触发<br>message | Socket.onmessage | 客户端接收服务端数据时触发<br>error | Socket.onerror | 通信发生错误时触发<br>close | Socket.onclose | 连接关闭时触发<br><strong>WebSocket 方法</strong><br>方法 | 描述<br>—|—<br>Socket.send() | 使用连接发送数据<br>Socket.close() | 关闭连接</p>
<h3 id="WebSocket-服务端"><a href="#WebSocket-服务端" class="headerlink" title="WebSocket 服务端"></a>WebSocket 服务端</h3><p>WebSocket 在服务端的实现非常丰富。Node.js、Java、C++、Python 等多种语言都有自己的解决方案。<br>语言框架 | 实现<br>——- | ——-<br>Node.js    | 3种实现：µWebSockets、Socket.IO、WebSocket-Node<br>Java       | javaweb通常依托servlet 容器：Tomcat7、Jetty7 及以上版本均开始支持 WebSocket。Spring 框架对 WebSocket 也提供了支持。</p>
<p>它们都遵循RFC6455 的通信标准，并且 Java API 统一遵循 JSR 356 - JavaTM API for WebSocket 规范。所以，在实际编码中，API 差异不大。</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>新建一个maven项目引入包：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- javaweb实现的websocket --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javaee-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>页面文件js：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">    <span class="keyword">var</span> websocket = <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">//判断当前浏览器是否支持WebSocket</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="string">'WebSocket'</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</span><br><span class="line">        websocket = <span class="keyword">new</span> WebSocket(<span class="string">"ws://localhost:8080/demo/demo1"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        alert(<span class="string">'Not support websocket'</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    websocket.onerror = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        setMessageInnerHTML(<span class="string">"WebSocket连接发生错误"</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    websocket.onopen = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        setMessageInnerHTML(<span class="string">"WebSocket连接成功"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//接收到消息的回调方法</span></span><br><span class="line">    websocket.onmessage = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        setMessageInnerHTML(event.data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    websocket.onclose = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        setMessageInnerHTML(<span class="string">"WebSocket连接关闭"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//监听窗口关闭事件，当窗口关闭时，主动去关闭websocket连接。</span></span><br><span class="line">    <span class="built_in">window</span>.onbeforeunload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        closeWebSocket();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setMessageInnerHTML</span>(<span class="params">innerHTML</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">'message'</span>).innerHTML += innerHTML + <span class="string">'&lt;br/&gt;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">closeWebSocket</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        websocket.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> message = <span class="built_in">document</span>.getElementById(<span class="string">'text'</span>).value;</span><br><span class="line">        websocket.send(message);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>Java web服务端：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ServerEndpoint</span> 注解是将目前的类定义成一个websocket服务器端</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ServerEndpoint</span>(<span class="string">"/demo1"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSocketServiceDemo</span> </span>&#123;</span><br><span class="line">    <span class="comment">//与某个客户端的连接会话，需要通过它来给客户端发送数据</span></span><br><span class="line">    <span class="keyword">private</span> Session session;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 连接建立成功调用的方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> session 可选的参数。</span></span><br><span class="line"><span class="comment">     *                session为与某个客户端的连接会话，需要通过它来给客户端发送数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnOpen</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onOpen</span><span class="params">(Session session)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.session = session;</span><br><span class="line">        System.out.println(<span class="string">"有新连接加入！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 连接关闭调用的方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnClose</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClose</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"有一连接关闭！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 收到客户端消息后调用的方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> message 客户端发送过来的消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> session 可选的参数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnMessage</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMessage</span><span class="params">(String message, Session session)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"来自客户端的消息:"</span> + message);</span><br><span class="line">        <span class="comment">//回复消息</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.session.getBasicRemote().sendText(message);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发生错误时调用</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> session</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> error</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnError</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Session session, Throwable error)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"发生错误"</span>);</span><br><span class="line">        error.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>idea中部测试：</strong></p>
<p>创建webapp目录和web.xml<br><img src="https://img.huyunshun.com/img/20200328185021.png" alt="20200328185021"><br>创建artifacts<br><img src="https://img.huyunshun.com/img/20200328185303.png" alt="20200328185303"><br>配置服务器：<br><img src="https://img.huyunshun.com/img/20200328185205.png" alt=""><br>选择Deployment</p>
<p>运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">有新连接加入！</span><br><span class="line">来自客户端的消息:你好</span><br><span class="line">有新连接加入！</span><br><span class="line">来自客户端的消息:a你好</span><br></pre></td></tr></table></figure>

<p><code>把它改成一个聊天室的模式</code><br>用户可以看到加入的其他用户发的消息，后台代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ServerEndpoint</span>(value = <span class="string">"/demo1"</span>, encoders = &#123;ServerEncoder<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">WebSocketServiceDemo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> AtomicInteger connectionIds = <span class="keyword">new</span> AtomicInteger(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 存放用户的websocket</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Set&lt;WebSocketServiceDemo&gt; connections = <span class="keyword">new</span> CopyOnWriteArraySet&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String nickname;</span><br><span class="line">    <span class="keyword">private</span> Session session;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WebSocketServiceDemo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        nickname = <span class="string">"用户"</span> + connectionIds.getAndIncrement();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 连接建立成功调用的方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnOpen</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onOpen</span><span class="params">(Session session)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.session = session;</span><br><span class="line">        connections.add(<span class="keyword">this</span>);</span><br><span class="line">        String message = String.format(<span class="string">" %s %s"</span>, nickname, <span class="string">"加入聊天室"</span>);</span><br><span class="line">        <span class="comment">// 上线通知</span></span><br><span class="line">        broadcast(<span class="number">0</span>,message);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 系统问候语</span></span><br><span class="line">            sendHello(<span class="keyword">this</span>);</span><br><span class="line">            <span class="comment">// 返回在线用户</span></span><br><span class="line">            onlineList();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 连接关闭调用的方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnClose</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClose</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        connections.remove(<span class="keyword">this</span>);</span><br><span class="line">        connectionIds.decrementAndGet();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            onlineList();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        String message = String.format(<span class="string">" %s %s"</span>, nickname, <span class="string">"退出聊天室"</span>);</span><br><span class="line">        broadcast(<span class="number">0</span>,message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 收到客户端消息后调用的方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> message 客户端发送过来的消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> session 可选的参数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnMessage</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMessage</span><span class="params">(String message, Session session)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> 过滤输入的内容</span></span><br><span class="line">        String m = String.format(<span class="string">" %s %s"</span>, nickname, message);</span><br><span class="line">        <span class="keyword">if</span> (m.contains(<span class="string">"To"</span>)) &#123;</span><br><span class="line">            <span class="comment">// 点对点发送 消息中包含 To</span></span><br><span class="line">            broadcastOneToOne(<span class="number">3</span>,m);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 群发</span></span><br><span class="line">            broadcast(<span class="number">1</span>,m);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发生错误时调用</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> session</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> error</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnError</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Session session, Throwable error)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"发生错误"</span>);</span><br><span class="line">        error.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 消息广播 通过connections，对所有其他用户推送信息的方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">broadcast</span><span class="params">(<span class="keyword">int</span> type, String msg)</span> </span>&#123;</span><br><span class="line">        Message message = <span class="keyword">new</span> Message(type, msg);</span><br><span class="line">        <span class="keyword">for</span> (WebSocketServiceDemo client : connections) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (client) &#123;</span><br><span class="line">                    client.session.getBasicRemote().sendObject(message);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                System.out.println(<span class="string">"错误:向客户端发送消息失败"</span>);</span><br><span class="line">                connections.remove(client);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    client.session.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e1) &#123;</span><br><span class="line">                    e1.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                String msg1 = String.format(<span class="string">" %s %s"</span>, client.nickname, <span class="string">"退出聊天室"</span>);</span><br><span class="line">                broadcast(<span class="number">0</span>,msg1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 点对点发送消息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">broadcastOneToOne</span><span class="params">(<span class="keyword">int</span> type, String msg)</span> </span>&#123;</span><br><span class="line">        String[] arr = msg.split(<span class="string">"To"</span>);</span><br><span class="line">        String toNickName=arr[<span class="number">1</span>];</span><br><span class="line">        Message message = <span class="keyword">new</span> Message(type, arr[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">boolean</span> isSend = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (WebSocketServiceDemo client : connections) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (toNickName.equals(client.nickname)) &#123;</span><br><span class="line">                    <span class="keyword">synchronized</span> (client) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            client.session.getBasicRemote().sendObject(message);</span><br><span class="line">                            <span class="keyword">this</span>.session.getBasicRemote().sendObject(message);</span><br><span class="line">                            isSend = <span class="keyword">true</span>;</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (EncodeException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                System.out.println(<span class="string">"错误:向用户发送消息失败"</span>);</span><br><span class="line">                connections.remove(client);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    client.session.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e1) &#123;</span><br><span class="line">                    e1.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                broadcast(<span class="number">0</span>, String.format(<span class="string">" %s %s"</span>, client.nickname, <span class="string">"退出聊天室"</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!isSend)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.session.getBasicRemote().sendObject(<span class="keyword">new</span> Message(<span class="number">0</span>, <span class="string">"该用户不存在"</span>));</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (EncodeException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 系统问候语</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sendHello</span><span class="params">(WebSocketServiceDemo client)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String m = String.format(<span class="string">" %s 你好！！"</span>, client.nickname);</span><br><span class="line">        Message message = <span class="keyword">new</span> Message(<span class="number">0</span>, m);</span><br><span class="line">        client.session.getBasicRemote().sendObject(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 在线用户,所有的用户一起推送。</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">onlineList</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String online = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">for</span> (WebSocketServiceDemo client : connections) &#123;</span><br><span class="line">            <span class="keyword">if</span> (online.equals(<span class="string">""</span>)) &#123;</span><br><span class="line">                online = client.nickname;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                online += <span class="string">"&lt;/br&gt;"</span> + client.nickname;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Message message = <span class="keyword">new</span> Message(<span class="number">2</span>, online);</span><br><span class="line">        <span class="keyword">for</span> (WebSocketServiceDemo client : connections) &#123;</span><br><span class="line">            client.session.getBasicRemote().sendObject(message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Message</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> type;<span class="comment">//消息类型</span></span><br><span class="line">        <span class="keyword">private</span> String msg;<span class="comment">//消息内容</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Message</span><span class="params">(<span class="keyword">int</span> type, String msg)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.type = type;</span><br><span class="line">            <span class="keyword">this</span>.msg = msg;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> type;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setType</span><span class="params">(<span class="keyword">int</span> type)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.type = type;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> msg;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMsg</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.msg = msg;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>由于在运行时报错：javax.websocket.EncodeException: No encoder specified for object of class<br>因为，使用client.session.getBasicRemote().sendObject(obj);发送对象数据。解决办法：</p>
<blockquote>
<p>新增一个类，并且在主类注解中加入代码：encoders = {ServerEncoder.class}</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerEncoder</span> <span class="keyword">implements</span> <span class="title">Encoder</span>.<span class="title">Text</span>&lt;<span class="title">WebSocketServiceDemo</span>.<span class="title">Message</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(EndpointConfig arg0)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">encode</span><span class="params">(WebSocketServiceDemo.Message messagepojo)</span> <span class="keyword">throws</span> EncodeException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> JSONObject.toJSONString(messagepojo);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>页面：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>WebSocket聊天室的实现<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> websocket = <span class="literal">null</span>;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//判断当前浏览器是否支持WebSocket</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (<span class="string">'WebSocket'</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</span></span><br><span class="line"><span class="actionscript">            websocket = <span class="keyword">new</span> WebSocket(<span class="string">"ws://localhost:8080/demo/demo1"</span>);</span></span><br><span class="line"><span class="actionscript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">            alert(<span class="string">'Not support websocket'</span>)</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        websocket.onerror = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">'tps'</span>).innerHTML = <span class="string">'连接错误！'</span>;</span></span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        websocket.onopen = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">'tps'</span>).innerHTML = <span class="string">'连接成功！'</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">//接收到消息的回调方法</span></span></span><br><span class="line"><span class="actionscript">        websocket.onmessage = <span class="function"><span class="keyword">function</span> <span class="params">(event)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(event.data);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> obj = <span class="built_in">JSON</span>.parse(event.data);</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span>(obj.type == <span class="number">0</span>)&#123;<span class="comment">//系统消息</span></span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">"syso"</span>);</span></span><br><span class="line"><span class="handlebars"><span class="xml">                setMessageInnerHTML("<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">'color: crimson;font-size: 12px'</span>&gt;</span>系统："+obj.msg+"<span class="tag">&lt;/<span class="name">span</span>&gt;</span>");</span></span></span><br><span class="line"><span class="actionscript">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(obj.type == <span class="number">1</span>)&#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">                setMessageInnerHTML("<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">'color: black;font-size: 14px'</span>&gt;</span>&gt;："+obj.msg+"<span class="tag">&lt;/<span class="name">span</span>&gt;</span>");</span></span></span><br><span class="line"><span class="actionscript">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(obj.type == <span class="number">2</span>)&#123;<span class="comment">//成员列表</span></span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.getElementById(<span class="string">'users'</span>).innerHTML = obj.msg + <span class="string">'&lt;br/&gt;'</span>;</span></span><br><span class="line"><span class="actionscript">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(obj.type == <span class="number">3</span>)&#123;<span class="comment">//私发</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                setMessageInnerHTML("<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">'color: black;font-size: 14px'</span>&gt;</span>&gt;："+obj.msg+"<span class="tag">&lt;/<span class="name">span</span>&gt;</span>");</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        websocket.onclose = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">'tps'</span>).innerHTML = <span class="string">'连接关闭！'</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">//监听窗口关闭事件，当窗口关闭时，主动去关闭websocket连接。</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onbeforeunload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">            closeWebSocket();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">setMessageInnerHTML</span><span class="params">(innerHTML)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">'message'</span>).innerHTML += innerHTML + <span class="string">'&lt;br/&gt;'</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">closeWebSocket</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line">            websocket.close();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">send</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> message = <span class="built_in">document</span>.getElementById(<span class="string">'text'</span>).value;</span></span><br><span class="line">            websocket.send(message);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"text"</span> <span class="attr">type</span>=<span class="string">"text"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"send()"</span>&gt;</span>发送消息<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"closeWebSocket()"</span>&gt;</span>关闭连接<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"tps"</span> <span class="attr">style</span>=<span class="string">"color: crimson"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"message"</span> <span class="attr">style</span>=<span class="string">"width: 80%; float:left; display: block; border: 1px solid #1353C2;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"width: 18%; float: right;display: block; border: 1px solid #1353C2;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> &gt;</span>成员：<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"users"</span> <span class="attr">style</span>=<span class="string">"font-size: 13px"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试成功：</p>
<p><strong>多用户多聊天室</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ServerEndpoint</span>(value = <span class="string">"/demo/&#123;roomId&#125;/&#123;userId&#125;"</span>, encoders = &#123;ServerEncoder<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">WebSocketServiceDemo1</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;String, Set&lt;WebSocketServiceDemo1&gt;&gt; rooms = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> String roomId;</span><br><span class="line">    <span class="keyword">private</span> String userId;</span><br><span class="line">    <span class="keyword">private</span> Session session;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WebSocketServiceDemo1</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 连接建立成功调用的方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnOpen</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onOpen</span><span class="params">(Session session, @PathParam(<span class="string">"roomId"</span>)</span> String roomId, @<span class="title">PathParam</span><span class="params">(<span class="string">"userId"</span>)</span> String userId) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.session = session;</span><br><span class="line">        <span class="keyword">this</span>.userId = userId;</span><br><span class="line">        <span class="keyword">this</span>.roomId = roomId;</span><br><span class="line">        <span class="keyword">if</span>(rooms.get(roomId)==<span class="keyword">null</span>)&#123;</span><br><span class="line">            Set&lt;WebSocketServiceDemo1&gt; socketServices = <span class="keyword">new</span> CopyOnWriteArraySet&lt;&gt;();</span><br><span class="line">            socketServices.add(<span class="keyword">this</span>);</span><br><span class="line">            rooms.put(roomId,socketServices);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            rooms.get(roomId).add(<span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        String message = String.format(<span class="string">" %s %s"</span>, userId, <span class="string">"加入聊天室"</span>);</span><br><span class="line">        <span class="comment">// 上线通知</span></span><br><span class="line">        broadcast(<span class="number">0</span>,message);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 系统问候语</span></span><br><span class="line">            sendHello(<span class="keyword">this</span>);</span><br><span class="line">            <span class="comment">// 返回在线用户</span></span><br><span class="line">            onlineList();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 连接关闭调用的方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnClose</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClose</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.userId+<span class="string">"退出"</span>);</span><br><span class="line">        rooms.get(roomId).remove(<span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            onlineList();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        String message = String.format(<span class="string">" %s %s"</span>, userId, <span class="string">"退出聊天室"</span>);</span><br><span class="line">        broadcast(<span class="number">0</span>,message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 收到客户端消息后调用的方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> message 客户端发送过来的消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> session 可选的参数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnMessage</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMessage</span><span class="params">(String message, Session session)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> 过滤输入的内容</span></span><br><span class="line">        String m = String.format(<span class="string">" %s %s"</span>, userId, message);</span><br><span class="line">        <span class="keyword">if</span> (m.contains(<span class="string">"To"</span>)) &#123;</span><br><span class="line">            <span class="comment">// 点对点发送 消息中包含 To</span></span><br><span class="line">            broadcastOneToOne(<span class="number">3</span>,m);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 群发</span></span><br><span class="line">            broadcast(<span class="number">1</span>,m);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发生错误时调用</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> session</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> error</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnError</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Session session, Throwable error)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"发生错误"</span>);</span><br><span class="line">        error.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 消息广播 通过connections，对所有其他用户推送信息的方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">broadcast</span><span class="params">(<span class="keyword">int</span> type, String msg)</span> </span>&#123;</span><br><span class="line">        Message message = <span class="keyword">new</span> Message(type, msg);</span><br><span class="line">        Set&lt;WebSocketServiceDemo1&gt; connections = rooms.get(roomId);</span><br><span class="line">        <span class="keyword">for</span> (WebSocketServiceDemo1 client : connections) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (client) &#123;</span><br><span class="line">                    client.session.getBasicRemote().sendObject(message);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                System.out.println(<span class="string">"错误:向客户端发送消息失败"</span>);</span><br><span class="line">                connections.remove(client);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    client.session.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e1) &#123;</span><br><span class="line">                    e1.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                String msg1 = String.format(<span class="string">" %s %s"</span>, client.userId, <span class="string">"退出聊天室"</span>);</span><br><span class="line">                broadcast(<span class="number">0</span>,msg1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 点对点发送消息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">broadcastOneToOne</span><span class="params">(<span class="keyword">int</span> type, String msg)</span> </span>&#123;</span><br><span class="line">        String[] arr = msg.split(<span class="string">"To"</span>);</span><br><span class="line">        String toNickName=arr[<span class="number">1</span>];</span><br><span class="line">        Message message = <span class="keyword">new</span> Message(type, arr[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">boolean</span> isSend = <span class="keyword">false</span>;</span><br><span class="line">        Set&lt;WebSocketServiceDemo1&gt; connections = rooms.get(roomId);</span><br><span class="line">        <span class="keyword">for</span> (WebSocketServiceDemo1 client : connections) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (toNickName.equals(client.userId)) &#123;</span><br><span class="line">                    <span class="keyword">synchronized</span> (client) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            client.session.getBasicRemote().sendObject(message);</span><br><span class="line">                            <span class="keyword">this</span>.session.getBasicRemote().sendObject(message);</span><br><span class="line">                            isSend = <span class="keyword">true</span>;</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (EncodeException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                System.out.println(<span class="string">"错误:向用户发送消息失败"</span>);</span><br><span class="line">                connections.remove(client);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    client.session.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e1) &#123;</span><br><span class="line">                    e1.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                broadcast(<span class="number">0</span>, String.format(<span class="string">" %s %s"</span>, client.userId, <span class="string">"退出聊天室"</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!isSend)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.session.getBasicRemote().sendObject(<span class="keyword">new</span> Message(<span class="number">0</span>, <span class="string">"该用户不存在"</span>));</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (EncodeException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 系统问候语</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sendHello</span><span class="params">(WebSocketServiceDemo1 client)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String m = String.format(<span class="string">" %s 你好！！"</span>, client.userId);</span><br><span class="line">        Message message = <span class="keyword">new</span> Message(<span class="number">0</span>, m);</span><br><span class="line">        client.session.getBasicRemote().sendObject(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 在线用户,所有的用户一起推送。</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">onlineList</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String online = <span class="string">""</span>;</span><br><span class="line">        Set&lt;WebSocketServiceDemo1&gt; connections = rooms.get(roomId);</span><br><span class="line">        <span class="keyword">for</span> (WebSocketServiceDemo1 client : connections) &#123;</span><br><span class="line">            <span class="keyword">if</span> (online.equals(<span class="string">""</span>)) &#123;</span><br><span class="line">                online = client.userId;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                online += <span class="string">"&lt;/br&gt;"</span> + client.userId;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Message message = <span class="keyword">new</span> Message(<span class="number">2</span>, online);</span><br><span class="line">        <span class="keyword">for</span> (WebSocketServiceDemo1 client : connections) &#123;</span><br><span class="line">            client.session.getBasicRemote().sendObject(message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Message</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> type;<span class="comment">//消息类型</span></span><br><span class="line">        <span class="keyword">private</span> String msg;<span class="comment">//消息内容</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Message</span><span class="params">(<span class="keyword">int</span> type, String msg)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.type = type;</span><br><span class="line">            <span class="keyword">this</span>.msg = msg;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> type;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setType</span><span class="params">(<span class="keyword">int</span> type)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.type = type;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> msg;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMsg</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.msg = msg;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>index:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span> %&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>WebSocket聊天室的实现<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">soc</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> roomId = <span class="built_in">document</span>.getElementById(<span class="string">"roomId"</span>).value;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> userId = <span class="built_in">document</span>.getElementById(<span class="string">"userId"</span>).value;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span>(roomId==<span class="string">''</span> || userId==<span class="string">''</span>)&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.getElementById(<span class="string">'tps'</span>).innerHTML = <span class="string">'房间号和用户id不能为空！'</span>;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">            socket(roomId,userId);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> websocket = <span class="literal">null</span>;</span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">socket</span><span class="params">(roomId,userId)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">//判断当前浏览器是否支持WebSocket</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (<span class="string">'WebSocket'</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</span></span><br><span class="line"><span class="actionscript">                websocket = <span class="keyword">new</span> WebSocket(<span class="string">"ws://localhost:8080/demo/demo/"</span>+roomId+<span class="string">"/"</span>+userId);</span></span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">                alert(<span class="string">'Not support websocket'</span>)</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">            websocket.onerror = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.getElementById(<span class="string">'tps'</span>).innerHTML = <span class="string">'连接错误！'</span>;</span></span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">            websocket.onopen = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.getElementById(<span class="string">'tps'</span>).innerHTML = <span class="string">'连接成功！'</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">            <span class="comment">//接收到消息的回调方法</span></span></span><br><span class="line"><span class="actionscript">            websocket.onmessage = <span class="function"><span class="keyword">function</span> <span class="params">(event)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(event.data);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> obj = <span class="built_in">JSON</span>.parse(event.data);</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span>(obj.type == <span class="number">0</span>)&#123;<span class="comment">//系统消息</span></span></span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log(<span class="string">"syso"</span>);</span></span><br><span class="line"><span class="handlebars"><span class="xml">                    setMessageInnerHTML("<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">'color: crimson;font-size: 12px'</span>&gt;</span>系统："+obj.msg+"<span class="tag">&lt;/<span class="name">span</span>&gt;</span>");</span></span></span><br><span class="line"><span class="actionscript">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(obj.type == <span class="number">1</span>)&#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">                    setMessageInnerHTML("<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">'color: black;font-size: 14px'</span>&gt;</span>&gt;："+obj.msg+"<span class="tag">&lt;/<span class="name">span</span>&gt;</span>");</span></span></span><br><span class="line"><span class="actionscript">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(obj.type == <span class="number">2</span>)&#123;<span class="comment">//成员列表</span></span></span><br><span class="line"><span class="javascript">                    <span class="built_in">document</span>.getElementById(<span class="string">'users'</span>).innerHTML = obj.msg + <span class="string">'&lt;br/&gt;'</span>;</span></span><br><span class="line"><span class="actionscript">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(obj.type == <span class="number">3</span>)&#123;<span class="comment">//私发</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                    setMessageInnerHTML("<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">'color: black;font-size: 14px'</span>&gt;</span>&gt;："+obj.msg+"<span class="tag">&lt;/<span class="name">span</span>&gt;</span>");</span></span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">            websocket.onclose = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.getElementById(<span class="string">'tps'</span>).innerHTML = <span class="string">'连接关闭！'</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"><span class="actionscript">        <span class="comment">//监听窗口关闭事件，当窗口关闭时，主动去关闭websocket连接。</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onbeforeunload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">            closeWebSocket();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">setMessageInnerHTML</span><span class="params">(innerHTML)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">'message'</span>).innerHTML += innerHTML + <span class="string">'&lt;br/&gt;'</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">closeWebSocket</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line">            websocket.close();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">send</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> message = <span class="built_in">document</span>.getElementById(<span class="string">'text'</span>).value;</span></span><br><span class="line">            websocket.send(message);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">聊天室ID:<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"roomId"</span> <span class="attr">type</span>=<span class="string">"text"</span>/&gt;</span></span><br><span class="line">用户ID:<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"userId"</span> <span class="attr">type</span>=<span class="string">"text"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"soc()"</span>&gt;</span>连接聊天室<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line">输入：<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"text"</span> <span class="attr">type</span>=<span class="string">"text"</span>/&gt;</span> <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"send()"</span>&gt;</span>发送消息<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"closeWebSocket()"</span>&gt;</span>关闭连接<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"tps"</span> <span class="attr">style</span>=<span class="string">"color: crimson"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"message"</span> <span class="attr">style</span>=<span class="string">"width: 80%; float:left; display: block; border: 1px solid #1353C2;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"width: 18%; float: right;display: block; border: 1px solid #1353C2;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> &gt;</span>成员：<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"users"</span> <span class="attr">style</span>=<span class="string">"font-size: 13px"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>测试完成。</p>
<p>简单的websocket就完成。后面介绍websocket spring或springboot实现。</p>

          
        
      
    </div>
     <!-- 相关文章推荐 -->
    
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huyunshun.com/2018/08/23/%E8%B7%A8N%E5%BA%93%E5%88%86%E9%A1%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="初晨">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img.huyunshun.com/img/20200522182348.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="简">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/23/%E8%B7%A8N%E5%BA%93%E5%88%86%E9%A1%B5/" itemprop="url">Mysql跨N库分页</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-23T16:37:37+08:00">
                2018-08-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mysql/" itemprop="url" rel="index">
                    <span itemprop="name">mysql</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>方法一：全局法</p>
<p>（1）将order by time offset X limit Y，改写成order by time offset 0 limit X+Y</p>
<p>（2）服务层对得到的N*(X+Y)条数据进行内存排序，内存排序后再取偏移量X后的Y条记录</p>
<p>这种方法随着翻页的进行，性能越来越低。</p>
<p>方法二：业务折衷法-禁止跳页查询</p>
<p>（1）用正常的方法取得第一页数据，并得到第一页记录的time_max</p>
<p>（2）每次翻页，将order by time offset X limit Y，改写成order by time where time&gt;$time_max limit Y</p>
<p>以保证每次只返回一页数据，性能为常量。</p>
<p>方法三：业务折衷法-允许模糊数据</p>
<p>（1）将order by time offset X limit Y，改写成order by time offset X/N limit Y/N</p>
<p>方法四：二次查询法</p>
<p>（1）将order by time offset X limit Y，改写成order by time offset X/N limit Y</p>
<p>（2）找到最小值time_min</p>
<p>（3）between二次查询，order by time between $time_min and $time_i_max</p>
<p>（4）设置虚拟time_min，找到time_min在各个分库的offset，从而得到time_min在全局的offset</p>
<p>（5）得到了time_min在全局的offset，自然得到了全局的offset X limit Y</p>

          
        
      
    </div>
     <!-- 相关文章推荐 -->
    
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huyunshun.com/2018/08/21/Git%E5%88%86%E6%94%AF%E5%88%87%E6%8D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="初晨">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img.huyunshun.com/img/20200522182348.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="简">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/21/Git%E5%88%86%E6%94%AF%E5%88%87%E6%8D%A2/" itemprop="url">Git分支切换</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-21T13:36:43+08:00">
                2018-08-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B7%A5%E5%85%B7/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="本地库上传到远程库"><a href="#本地库上传到远程库" class="headerlink" title="本地库上传到远程库"></a>本地库上传到远程库</h3><p><img src="https://img.huyunshun.com/img/20200421153225.png" alt="20200421153225"></p>
<pre><code>创建本地库

$ git init
Initialized empty Git repository in H:/Admin桌面}/临时}Git/config-repo-demo/.git/

新增文件后查看状态

hu@hu MINGW64 /h/Admin桌面}/临时}Git/config-repo-demo (master)
$ git status
On branch master

No commits yet

Untracked files:
(use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)

    config-client-dev.yml
    config-client.yml

nothing added to commit but untracked files present (use &quot;git add&quot; to track)

将当前目录所有文件提交本地git仓库

hu@hu MINGW64 /h/Admin桌面}/临时}Git/config-repo-demo (master)
$ git add .

提交版本信息到本地库

hu@hu MINGW64 /h/Admin桌面}/临时}Git/config-repo-demo (master)
$ git commit -m &quot;添加配置信息}&quot;
[master (root-commit) b19476a] 添加配置信息
2 files changed, 4 insertions(+)
create mode 100644 config-client-dev.yml
create mode 100644 config-client.yml

将本地的仓库关联到GitHub

hu@hu MINGW64 /h/Admin桌面}/临时}Git/config-repo-demo (master)
$ git remote add origin https://github.com/huingsn/config-repo-demo.git

将远程库下载到本地

hu@hu MINGW64 /h/Admin桌面}/临时}Git/config-repo-demo (master)
$ git clone https://github.com/huingsn/config-repo-demo.git
Cloning into &apos;config-repo-demo&apos;...
remote: Enumerating objects: 3, done.
remote: Counting objects: 100% (3/3), done.
remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (3/3), done.

上传github之前pull一下

hu@hu MINGW64 /h/Admin桌面}/临时}Git/config-repo-demo (master)
$ git pull --rebase origin master
warning: no common commits
remote: Enumerating objects: 3, done.
remote: Counting objects: 100% (3/3), done.
remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (3/3), done.
From https://github.com/huingsn/config-repo-demo
* branch            master     -&gt; FETCH_HEAD
* [new branch]      master     -&gt; origin/master
First, rewinding head to replay your work on top of it...
Applying: 添加配置信息

上传代码到GitHub远程仓库

hu@hu MINGW64 /h/Admin桌面}/临时}Git/config-repo-demo (master)
$ git push -u origin master
Enumerating objects: 4, done.
Counting objects: 100% (4/4), done.
Delta compression using up to 4 threads
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 341 bytes | 341.00 KiB/s, done.
Total 3 (delta 0), reused 0 (delta 0)
To https://github.com/huingsn/config-repo-demo.git
b67a80d..4191bba  master -&gt; master
Branch &apos;master&apos; set up to track remote branch &apos;master&apos; from &apos;origin&apos;.

完毕！</code></pre><p>上面是本地和远程都新建–关联–同步</p>
<p>如果是已经同步好的库，本地做了修改，需要同步，只需要这几个步骤：</p>
<pre><code>1、查看当前的git仓库状态
        git status
2、更新全部
git add *
3、接着输入git commit -m &quot;更新说明&quot;
        git commit -m &quot;更新说明&quot;
4、先git pull,拉取当前分支最新代码
        git pull
5、push到远程master分支上
        git push origin master:master</code></pre><p>master为我自己的分支的名称，实际应用中，你要改成自己的分支的名称</p>
<p>打开GitHub已经同步了</p>
<h2 id="切换分支"><a href="#切换分支" class="headerlink" title="切换分支"></a>切换分支</h2><h3 id="1、查看远程分支"><a href="#1、查看远程分支" class="headerlink" title="1、查看远程分支"></a>1、查看远程分支</h3><pre><code>$ git branch -a
* master
remotes/origin/HEAD -&gt; origin/master
remotes/origin/config-label-test
remotes/origin/master</code></pre><p>可以看到，我们现在在master分支下</p>
<h3 id="2、查看本地分支"><a href="#2、查看本地分支" class="headerlink" title="2、查看本地分支"></a>2、查看本地分支</h3><pre><code>$ git branch
* master</code></pre><h3 id="3、切换分支"><a href="#3、切换分支" class="headerlink" title="3、切换分支"></a>3、切换分支</h3><pre><code>$ git checkout -b config-label-test
Switched to a new branch &apos;config-label-test&apos;
$ git branch
* config-label-test
master</code></pre><h3 id="4、切换回master分支"><a href="#4、切换回master分支" class="headerlink" title="4、切换回master分支"></a>4、切换回master分支</h3><pre><code>$ git checkout master
Switched to branch &apos;master&apos;
Your branch is up to date with &apos;origin/master&apos;.</code></pre><p>git status 查看分支状态</p>
<h3 id="回退版本"><a href="#回退版本" class="headerlink" title="回退版本"></a>回退版本</h3><pre><code>$ git reset --hard HEAD
git reset的作用是修改HEAD的位置，即将HEAD指向的位置改变为之前存在的某个版本

git revert的作用通过反做创建一个新的版本，这个版本的内容与我们要回退到的目标版本一样，但是HEAD指针是指向这个新生成的版本，而不是目标版本。

$ git fetch 相当于是从远程获取最新到本地，不会自动merge</code></pre><p>git pull：相当于是从远程获取最新版本并merge到本地，在实际使用中，git fetch更安全一些</p>
<p>git reflog查看所有历史提交记录其中包括已用reset命令删除的提交</p>
<p>在vs中每次更新代码都会要输入账号密码，方便起见，可以配置一下让GIT记住密码账号。</p>
<p>git config –global credential.helper store   //在Git Bash输入这个命令就可以了</p>
<p>git修改commit时间</p>
<p>git commit –amend –date=”Thu Aug 9 23:04:57 2018 -0700”</p>

          
        
      
    </div>
     <!-- 相关文章推荐 -->
    
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huyunshun.com/2018/08/14/Spring%20Cloud%20Sleuth/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="初晨">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img.huyunshun.com/img/20200522182348.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="简">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/14/Spring%20Cloud%20Sleuth/" itemprop="url">Spring Cloud Sleuth</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-14T00:00:00+08:00">
                2018-08-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/springcloud/" itemprop="url" rel="index">
                    <span itemprop="name">springcloud</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>随着分布式服务架构的流行，特别是微服务等设计理念在系统中的应用，业务的调用链越来越复杂。<br>系统规模也会变得越来越大，各微服务间的调用关系也变得越来越复杂。通常一个由客户端发起的请求在后端系统中会经过多个不同的微服务调用来协同产生最后的请求结果，在复杂的微服务架构系统中，几乎每一个前端请求都会形成一个复杂的分布式服务调用链路，在每条链路中任何一个依赖服务出现延迟过高或者错误都有可能引起请求最后的失败。同时，缺乏一个自上而下全局的调用id，如何有效的进行相关的数据分析工作？<br>分布式服务跟踪是整个分布式系统中跟踪一个用户请求的过程（包括数据采集、数据传输、数据存储、数据分析、数据可视化），捕获此类跟踪让我们构建用户交互背后的整个调用链的视图，这是调试和监控微服务的关键工具。Spring Cloud Sleuth是Spring Cloud为分布式服务跟踪提供的解决方案，有了它，我们可以：<br>提供链路追踪，故障快速定位：可以通过调用链结合业务日志快速定位错误信息。<br>可视化各个阶段耗时，进行性能分析<br>各个调用环节的可用性、梳理服务依赖关系以及优化<br>数据分析，优化链路：可以得到用户的行为路径，汇总分析应用在很多业务场景。   </p>
<h5 id="一个简单例子"><a href="#一个简单例子" class="headerlink" title="一个简单例子"></a>一个简单例子</h5><p>准备注册中心，创建一个微服务应用：sleuth-trace-1，实现rest接口trace1，并且这个接口调用了sleuth-trace-2。<br>代码见sleuth-trace-1</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-sleuth<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.hu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sleuth-trace-1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-sleuth<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>net.logstash.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logstash-logback-encoder<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TraceApplicationOne</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Logger logger = Logger.getLogger(getClass());</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(TraceApplicationOne<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@LoadBalanced</span><span class="comment">//负载</span></span><br><span class="line">    <span class="function">RestTemplate <span class="title">restTemplate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/trace1"</span>, method = RequestMethod.GET)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">trace</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"---------call sleuth-trace-1------------"</span>);</span><br><span class="line">        <span class="keyword">return</span> restTemplate().getForEntity(<span class="string">"http://sleuth-trace-2/trace2"</span>, String<span class="class">.<span class="keyword">class</span>).<span class="title">getBody</span>()</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">7904</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">sleuth-trace-1</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://user:123456@localhost:8761/eureka</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">root:</span> <span class="string">INFO</span></span><br></pre></td></tr></table></figure>
<p>创建sleuth-trace-2<br>依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-sleuth<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.hu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sleuth-trace-1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-sleuth<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>net.logstash.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logstash-logback-encoder<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">7906</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">sleuth-trace-2</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://user:123456@localhost:8761/eureka</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">root:</span> <span class="string">info</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TraceApplicationTwo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Logger logger = Logger.getLogger(getClass());</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(TraceApplicationTwo<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/trace2"</span>, method = RequestMethod.GET)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">trace</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"---------------call sleuth-trace-2 -------------------"</span>);</span><br><span class="line">        logger.info(<span class="string">"----------------------"</span>+ request.getHeader(<span class="string">"X-B3-TraceId"</span>)+ request.getHeader(<span class="string">"X-B3-SpanId"</span>));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Trace"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>之后启动sleuth-trace-2和sleuth-trace-1<br>通过postman访问<a href="http://localhost:7904/trace1" target="_blank" rel="noopener">http://localhost:7904/trace1</a><br>控制台分别显示信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[nio-7904-exec-4] tionOne$<span class="variable">$EnhancerBySpringCGLIB</span>$<span class="variable">$a7e32e75</span> : ---------call sleuth-trace-1------------</span><br><span class="line">[nio-7906-exec-1] tionTwo$<span class="variable">$EnhancerBySpringCGLIB</span>$<span class="variable">$178e18f5</span> : ---------------call sleuth-trace-2 -------------------</span><br></pre></td></tr></table></figure>

<p>以上准备工作完成后，来实现跟踪</p>
<h5 id="实现跟踪"><a href="#实现跟踪" class="headerlink" title="实现跟踪"></a>实现跟踪</h5><p>为sleuth-trace-2和sleuth-trace-1服务添加跟踪功能，通过Spring Cloud Sleuth，只需要在两个服务中增加依赖spring-cloud-starter-sleuth即可。</p>
<p>重启后，在访问，日志信息中就显示一些sleuth的信息，如</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> [sleuth-trace-2,ced24759781b822f,b2c24565840b3207,<span class="literal">false</span>] 15288 --- [nio-7906-exec-9] ationTwo$<span class="variable">$EnhancerBySpringCGLIB</span>$<span class="variable">$1b09342</span> : ---------------call sleuth-trace-2 -------------------</span><br><span class="line"></span><br><span class="line">第一个值：sleuth-trace-2，它记录了应用的名称，也就是application.properties中spring.application.name参数配置的属性。</span><br><span class="line">第二个值：ced24759781b822f，Spring Cloud Sleuth生成的一个ID，称为Trace ID，它用来标识一条请求链路。一条请求链路中包含一个Trace ID，多个Span ID。</span><br><span class="line">第三个值：b2c24565840b3207，Spring Cloud Sleuth生成的另外一个ID，称为Span ID，它表示一个基本的工作单元，比如：发送一个HTTP请求。</span><br><span class="line">第四个值：<span class="literal">false</span>，表示是否要将该信息输出到Zipkin等服务中来收集和展示。</span><br></pre></td></tr></table></figure>
<p>上面四个值中的Trace ID和Span ID是Spring Cloud Sleuth实现分布式服务跟踪的核心。在一次服务请求链路的调用过程中，会保持并传递同一个Trace ID，从而将整个分布于不同微服务进程中的请求跟踪信息串联起来，以上面输出内容为例，sleuth-trace-1和sleuth-trace-2同属于一个前端服务请求来源，所以他们的Trace ID是相同的，处于同一条请求链路中。</p>
<h5 id="跟踪原理"><a href="#跟踪原理" class="headerlink" title="跟踪原理"></a>跟踪原理</h5><p>分布式系统中的服务跟踪在理论上并不复杂，它主要包括下面两个关键点：   </p>
<ul>
<li>为了实现请求跟踪，当请求发送到分布式系统的入口端点时，只需要服务跟踪框架为该请求创建一个唯一的跟踪标识，同时在分布式系统内部流转的时候，框架始终保持传递该唯一标识，直到返回给请求方为止，这个唯一标识就是前文中提到的Trace ID。通过Trace ID的记录，我们就能将所有请求过程日志关联起来。</li>
<li>为了统计各处理单元的时间延迟，当请求达到各个服务组件时，或是处理逻辑到达某个状态时，也通过一个唯一标识来标记它的开始、具体过程以及结束，该标识就是我们前文中提到的Span ID，对于每个Span来说，它必须有开始和结束两个节点，通过记录开始Span和结束Span的时间戳，就能统计出该Span的时间延迟，除了时间戳记录之外，它还可以包含一些其他元数据，比如：事件名称、请求信息等。</li>
</ul>
<p>在项目中引入spring-cloud-starter-sleuth依赖之后， 它会自动的为当前应用构建起各通信通道的跟踪机制，比如：   </p>
<ul>
<li>通过诸如RabbitMQ、Kafka（或者其他任何Spring Cloud Stream绑定器实现的消息中间件）传递的请求</li>
<li>通过Zuul代理传递的请求</li>
<li>通过RestTemplate发起的请求</li>
</ul>
<p>之前的例子在发送到sleuth-trace-2之前会为在该请求的Header中增加实现跟踪需要的重要信息，主要有下面这几个（org.springframework.cloud.sleuth.Span的源码获取）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">X-B3-TraceId：一条请求链路（Trace）的唯一标识，必须值</span><br><span class="line">X-B3-SpanId：一个工作单元（Span）的唯一标识，必须值</span><br><span class="line">X-B3-ParentSpanId:：标识当前工作单元所属的上一个工作单元，Root Span（请求链路的第一个工作单元）的该值为空</span><br><span class="line">X-B3-Sampled：是否被抽样输出的标志，1表示需要被输出，0表示不需要被输出</span><br><span class="line">X-Span-Name：工作单元的名称</span><br></pre></td></tr></table></figure>

<p>还可以在代码中获取这些信息：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/trace2"</span>, method = RequestMethod.GET)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">trace</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">    logger.info(<span class="string">"---------------call sleuth-trace-2 -------------------"</span>);</span><br><span class="line">    logger.info(<span class="string">"----------------------"</span>+ request.getHeader(<span class="string">"X-B3-TraceId"</span>)+ request.getHeader(<span class="string">"X-B3-SpanId"</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Trace"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再次运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">---------------call sleuth-trace-2 -------------------</span><br><span class="line">----------------------3f5b35a06e93292b4fac896c8cecede8</span><br></pre></td></tr></table></figure>
<h5 id="整合Logstash"><a href="#整合Logstash" class="headerlink" title="整合Logstash"></a>整合Logstash</h5><p>ELK平台主要有由ElasticSearch、Logstash和Kiabana三个开源免费工具组成：   </p>
<ul>
<li>Elasticsearch是个开源分布式搜索引擎，它的特点有：分布式，零配置，自动发现，索引自动分片，索引副本机制，restful风格接口，多数据源，自动搜索负载等。</li>
<li>Logstash是一个完全开源的工具，他可以对你的日志进行收集、过滤，并将其存储供以后使用。</li>
<li>Kibana 也是一个开源和免费的工具，它Kibana可以为 Logstash 和 ElasticSearch 提供的日志分析友好的 Web 界面，可以帮助您汇总、分析和搜索重要数据日志。</li>
</ul>
<p>实现与负责日志收集的Logstash完成数据对接即可，所以我们需要为Logstash准备json格式的日志输出。由于Spring Boot应用默认使用了logback来记录日志，而Logstash自身也有对logback日志工具的支持工具，所以我们可以直接通过在logback的配置中增加对logstash的appender，就能非常方便的将日志转换成以json的格式存储和输出了。</p>
<p>在之前的基础上，实现面向logstash日志输出配置：在pom.xml依赖中引入logstash-logback-encoder依赖</p>
<p>在sleuth-trace-1创建配置文件，之前的配置，移到新创建的文件中。<br>这是因为：logback-spring.xml的加载在application.yml之前，所以之前的配置logback-spring.xml无法获取到spring.application.name属性，因此这里将该属性移动到最先加载的bootstrap配置文件中。</p>
<p>/resource目录下创建logback配置文件logback-spring.xml:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--对logstash支持主要通过名为logstash的appender实现，主要是对日志信息的格式化处理，为了方便调试查看我们先将json日志输出到文件中。--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">resource</span>=<span class="string">"org/springframework/boot/logging/logback/defaults.xml"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">"context"</span> <span class="attr">name</span>=<span class="string">"springAppName"</span> <span class="attr">source</span>=<span class="string">"spring.application.name"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 日志在工程中的输出位置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"LOG_FILE"</span> <span class="attr">value</span>=<span class="string">"$&#123;BUILD_FOLDER:-build&#125;/$&#123;springAppName&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 控制台的日志输出样式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"CONSOLE_LOG_PATTERN"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">value</span>=<span class="string">"%clr(%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;)&#123;faint&#125; %clr($&#123;LOG_LEVEL_PATTERN:-%5p&#125;) %clr([$&#123;springAppName:-&#125;,%X&#123;X-B3-TraceId:-&#125;,%X&#123;X-B3-SpanId:-&#125;,%X&#123;X-Span-Export:-&#125;])&#123;yellow&#125; %clr($&#123;PID:- &#125;)&#123;magenta&#125; %clr(---)&#123;faint&#125; %clr([%15.15t])&#123;faint&#125; %clr(%-40.40logger&#123;39&#125;)&#123;cyan&#125; %clr(:)&#123;faint&#125; %m%n$&#123;LOG_EXCEPTION_CONVERSION_WORD:-%wEx&#125;"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 控制台Appender --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"console"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.filter.ThresholdFilter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>INFO<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;CONSOLE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>utf8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 为logstash输出的json格式的Appender --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"logstash"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.RollingFileAppender"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;LOG_FILE&#125;.json<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;LOG_FILE&#125;.json.%d&#123;yyyy-MM-dd&#125;.gz<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>7<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">"net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">providers</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">timestamp</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">timeZone</span>&gt;</span>UTC<span class="tag">&lt;/<span class="name">timeZone</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">timestamp</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">pattern</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">pattern</span>&gt;</span></span><br><span class="line">                        &#123;</span><br><span class="line">                        "severity": "%level",</span><br><span class="line">                        "service": "$&#123;springAppName:-&#125;",</span><br><span class="line">                        "trace": "%X&#123;X-B3-TraceId:-&#125;",</span><br><span class="line">                        "span": "%X&#123;X-B3-SpanId:-&#125;",</span><br><span class="line">                        "exportable": "%X&#123;X-Span-Export:-&#125;",</span><br><span class="line">                        "pid": "$&#123;PID:-&#125;",</span><br><span class="line">                        "thread": "%thread",</span><br><span class="line">                        "class": "%logger&#123;40&#125;",</span><br><span class="line">                        "rest": "%message"</span><br><span class="line">                        &#125;</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">providers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"INFO"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"console"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"logstash"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行，访问后，工程目录下发现有一个build目录，下面分别创建了以各自应用名称命名的json文件，该文件就是在logback-spring.xml中配置的名为logstash的appender输出的日志文件。<br>除了这种方式生成json文件之外，也可以使用LogstashTcpSocketAppender将日志内容直接通过Tcp Socket输出到logstash服务端。    </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"logstash"</span> <span class="attr">class</span>=<span class="string">"net.logstash.logback.appender.LogstashTcpSocketAppender"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">destination</span>&gt;</span>127.0.0.1:9250<span class="tag">&lt;/<span class="name">destination</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="整合zipkin"><a href="#整合zipkin" class="headerlink" title="整合zipkin"></a>整合zipkin</h5><p>利用ELK平台提供的收集、存储、搜索等强大功能，对跟踪信息的管理和使用已经变得非常便利。但是，在ELK平台中的数据分析维度缺少对请求链路中各阶段时间延迟的关注，如需要追溯请求链路找出整个调用链路中出现延迟过高的瓶颈源，亦或是为了实现对分布式系统做延迟监控等与时间消耗相关的需求，这时候类似ELK这样的日志分析系统就显得有些乏力。对于这样的问题，我们就可以引入Zipkin来得以轻松解决。</p>
<p>Zipkin是Twitter的一个开源项目，它基于Google Dapper实现。我们可以使用它来收集各个服务器上请求链路的跟踪数据，并通过它提供的REST API接口来辅助我们查询跟踪数据以实现对分布式系统的监控程序，从而及时地发现系统中出现的延迟升高问题并找出系统性能瓶颈的根源。除了面向开发的API接口之外，它也提供了方便的UI组件来帮助我们直观的搜索跟踪信息和分析请求链路明细，比如：可以查询某段时间内各用户请求的处理时间等。</p>
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAzAAAAJrCAIAAACwVOHMAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAgAElEQVR4nOzdeXxU1fk/8HPv3NlnkskGSQgJOwQICAMiiEBqRZRNCpWl/YICRqqV1p9SxQi1IF9aWayoVBQXaIlSqTaEVoqCKLhBE2QnYAiBJJOQbZLMvtz7++PqmC8kwyRM5ibnft5/+Jq567mYZ+aZc557LiMIAgEAAAAA6bBSNwAAAABA7pCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRkAAACAxJCQAQAAAEgMCRlQa/369WazOSsrS3ybn5+Pt3iLt5367bx58xobGwkAjZCQAbWSk5OlbgIAhJPBYDAajVK3AqBdMIIgSN0GgHDKz89PSkpCNgZAn/LycjG0GxsbkZkBZZCQAW2mTp1aXl6ek5PTv39/qdsCAGFWXl6+YcMGi8WSk5MjdVsAwomTugEAYVZeXk4IQTYGQKXk5OSDBw9K3QqA8ENCBrR5/fXXpW4CALQjxDhQCUOWAAAAABLDXZYAAAAAEkNCBrTJysoKzF0EAPRBjAOVUEMGtMnPz5e6CQDQjhDjQCUkZEAbFPwC0A0xDlRCUT8AAACAxFBDBgAAACAxJGRAGxT8AtANMQ5UQg0Z0AYFvwB0Q4wDlZCQAW1Q8AtAN8Q4UAlF/QAAAAASQw0ZAAAAgMSQkAFtUPBLAZfL9dxzz/3617+ura0Nfa/c3Fyz2dxSgVFtbe2SJUtWr17tcrnC1EyQBmIcqIQaMqANCn47uOLi4l//+tcVFRXNrk1JSdm0aZPJZLp8+bLD4Qhj8tTY2GixWDiO8/l84TomSAIxDlRCQga0QcFvB2cwGGbOnOnxeJouFAThq6++On369IMPPpiamsowzObNm/1+v16vD9d509LScnJyFAqFRqMJ1zFBEohxoBISMqCN2WyWugkQTEJCwsKFC69ZWFRUtG/fvsmTJ0+cOJFhGEJIe6RNYUzvQEKIcaASasgAQGI2m23z5s2EkAULFuh0OqmbAwAgASRkQBsU/HYugiC8//77hw8fXrRoUe/evcWFLpcrOzt7wYIFVqtVXBIo2D99+vSjjz46atSoCRMmbNiwoaampqUjV1dXP/TQQxMmTDhy5AghxGq1LliwIDs7W6xLC7ytqKh49dVXJ0yYMGrUqEcfffTs2bPtf9FwUxDjQCUMWQJtUPDbuRQUFGzbtm3atGkTJ0684cYHDx788ssvx4wZk5GRUVJS8ve///3cuXNr166Nj4+/Zkur1bphw4YLFy6sXbt25MiRLR3QarWuX79erVbPmTOnpKTkwIEDK1eufPHFF1NSUm72wqDdIMaBSkjIgDYo+O1EqqurX3vttV69emVlZalUqhtuf+7cuVdffTUxMZEQIghCXl7emjVrDhw4cP/99zfdzOFwbNy48auvvnruueduu+02sSitWf/9739Xr1591113MQwjCMLOnTvXrVt3/PhxJGQdGWIcqISEDGiDgt/Owufz7dq168KFCy+88EJCQkIou8yaNUvMxgghDMPccccd6enpx48fnzZtWuAmAL/fv3379o8//jg7O3v8+PFBsjFCyO2333777beL2zAMc8stt8TExBQVFd3clUH7QowDlZCQAYA0jh49umPHjl/84hfDhw8PcZdrhia1Wm23bt1KS0tdLlcgIfvTn/506dKlFStWTJ48OXg2Jh5BoVAE3qrVarVa3ZqLAAAIDxT1A21Q8NsplJaWbty4cdCgQffffz/HtfGXod/vdzqder2+aVI1fPhwo9FYUFDgdDrD1FjoWBDjQCX0kAFtUPDb8blcrq1bt1ZVVa1cuTI2Njb0Hf1+f9O3dXV1xcXFZrO56aRlkyZNysjIWLNmDSHk6aefxjwa9EGMA5WQkAFtUPDbwQmCsG/fvo8+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FBRs27bN4XAkJycbjcbi4uL4+Hij0ZiRkZGenh7ZfzMAAJALl8v14osvzpkzJ1Aq43K59u/fP3PmzBvuO2zYsHXr1g0ePLi1t8FBS2hOyJqyWCyjRo1qukS81ZEQ4vP5/vnPf/70pz/9+OOPW3tYnU6n1+tra2uNRmNgYWVl5WOPPXb58uXk5OTi4mK73e7z+e68806VSuV2uzds2PDoo49yHLd+/fqPPvpIq9U+88wzhw4dEvO88ePHi79CrFbrN998069fP4VCcXOXLjso+AWgG2K8/Rw9evTo0aPnz58PLLnzzjub9pbl5+c3fUzCvn37xBevv/46ei5vkiwSsvr6+srKypSUlKYLxVp7QkhRUZFOpxs6dGgbEjKlUpmQkHDhwoW0tDSXy/Xmm2/OnDkzJSXlww8/DGyTn5//xRdfLF26VHwr3lwZFRXFsuzWrVsDfWB2u71Pnz6BvXr06IGfHW2DUl8AuiHG28nVq1dzc3Nfeumlpt8+LpcrOzt77969hJC9e/cuWLBgwYIFgW80kdihADeJ/oRMEITPPvssPT09Pj4+sLCkpCQtLU183b9///79+1ut1mZ39/l8PM+3tMrj8YwcOXL79u233Xabz+errKzUarWEEJfLtW3btltuuSXQLVdfX//666/fe++9I0eOFEfcx4wZY7PZ/vrXv7IsO3PmzOLi4vHjxwcO7nK5du3add999wV68iBE+N0MQDfEeDs5cODA/fffn5qaevbs2RMnTkRHR48ZMyYqKmrNmjXLli1rWkNWVlb2n//8Z968eR988EF6enpgenO4GZQnZB6PJzc39/z5848//nig8LCiouLMmTO333578H337dv3hz/8QaVSZWdnq9Vqr9fb2NhYVlZWXFy8f//+7du3l5eXP/TQQ/Pnz09MTHz//ff79++v0+l0Op3FYtm0adO4ceNGjhxJCGlsbDQYDNHR0b/61a9ee+21goKC2bNnOxyOXbt2FRYWLly4MDU1devWrRkZGcnJyTabTa1W8zxvs9mKioronpSknaDbHIBuiPF2MmfOHDHfSk9PD1LBfOHCha1bty5dulSj0UybNu2NN964evXqxIkTUd1/k2ieh6y+vv7FF18cPny4OC9rUVHRY489VllZyXHc7NmzH3nkkZbmXG1a1B9YeOjQoT//+c8jRowYNGhQnz59unfvbjAY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"/>

<p>Zipkin主要有4个核心组件构成：</p>
<ul>
<li>Collector：收集器组件，它主要用于处理从外部系统发送过来的跟踪信息，将这些信息转换为Zipkin内部处理的Span格式，以支持后续的存储、分析、展示等功能。</li>
<li>Storage：存储组件，它主要对处理收集器接收到的跟踪信息，默认会将这些信息存储在内存中，我们也可以修改此存储策略，通过使用其他存储组件将跟踪信息存储到数据库中。</li>
<li>RESTful API：API组件，它主要用来提供外部访问接口。比如给客户端展示跟踪信息，或是外接系统访问以实现监控等。</li>
<li>Web UI：UI组件，基于API组件实现的上层应用。通过UI组件用户可以方便而有直观地查询和分析跟踪信息。<h5 id="HTTP收集"><a href="#HTTP收集" class="headerlink" title="HTTP收集"></a>HTTP收集</h5>搭建Zipkin Server<br>创建一个基础的Spring Boot应用，命名为zipkin-server，并在pom.xml中引入Zipkin Server的相关依赖。<br>依赖：<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-sleuth<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.hu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zipkin-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.zipkin.java<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zipkin-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.zipkin.java<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zipkin-autoconfigure-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
配置：<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">zipkin-server</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">4343</span></span><br></pre></td></tr></table></figure>
启动类：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableZipkinServer</span><span class="comment">//启动Zipkin Server</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZipkinApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(ZipkinApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
启动项目，就可以浏览。</li>
</ul>
<p>完成了Zipkin Server的搭建之后，对之前的应用实现将跟踪信息输出到Zipkin Server。</p>
<p>在之前的两个应用中，接入依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-sleuth-zipkin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>配置文件中增加Zipkin 的地址spring.zipkin.base-url=<a href="http://localhost:3332" target="_blank" rel="noopener">http://localhost:3332</a></p>
<p>再次启动应用，收集的信息就会在Zipkin Server显示。</p>
<h5 id="收集跟踪消息中间件"><a href="#收集跟踪消息中间件" class="headerlink" title="收集跟踪消息中间件"></a>收集跟踪消息中间件</h5><p>1、修改应用<br>Spring Cloud Sleuth在整合Zipkin时，不仅实现了以HTTP的方式收集跟踪信息，还实现了通过消息中间件来对跟踪信息进行异步收集的封装。通过结合Spring Cloud Stream，我们可以非常轻松的让应用客户端将跟踪信息输出到消息中间件上，同时Zipkin服务端从消息中间件上异步地消费这些跟踪信息。<br>为了让sleuth-trace-2和sleuth-trace-1在产生跟踪信息之后，能够将抽样记录输出到消息中间件中，我们除了需要之前引入的spring-cloud-starter-sleuth依赖之外，还需要引入zipkin对Spring Cloud Stream的扩展依赖spring-cloud-sleuth-stream以及基于Spring Cloud Stream实现的消息中间件绑定器依赖，以使用RabbitMQ为例，我们可以加入如下依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-sleuth-stream<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-stream-rabbit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在配置中去掉HTTP方式实现时使用的spring.zipkin.base-url参数，并根据实际部署情况，增加消息中间件的相关配置。</p>
<p>2、修改zipkin-server服务端<br>让zipkin-server服务端能够从消息中间件中获取跟踪信息，我们只需要在pom.xml中引入针对消息中间件收集封装的服务端依赖spring-cloud-sleuth-zipkin-stream，同时为了支持具体使用的消息中间件，我们还需要引入针对消息中间件的绑定器实现，比如以使用RabbitMQ为例，我们可以在依赖中增加如下内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-sleuth-zipkin-stream<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-stream-rabbit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.zipkin.java<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zipkin-autoconfigure-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>其中，spring-cloud-sleuth-zipkin-stream依赖是实现从消息中间件收集跟踪信息的核心封装，其中包含了用于整合消息中间件的核心依赖、zipkin服务端的核心依赖、以及一些其他通常会被使用的依赖（比如：用于扩展数据存储的依赖、用于支持测试的依赖等）。但是，需要注意的是这个包里并没有引入zipkin的前端依赖zipkin-autoconfigure-ui，为了方便使用，我们在这里也引用了它。</p>
<p>把项目都启动后，可以在RabbitMQ的控制页面中看到一个名为sleuth的交换器，它就是zipkin的消息中间件收集器实现使用的默认主题。<br>当发送请求时，有被抽样收集的跟踪信息，我们可以在RabbitMQ的控制页面中发现有消息被发送到了sleuth交换器中，同时我们再到zipkin服务端的Web页面中也能够搜索到相应的跟踪信息。</p>
<h5 id="收集原理"><a href="#收集原理" class="headerlink" title="收集原理"></a>收集原理</h5><p>暂停</p>

          
        
      
    </div>
     <!-- 相关文章推荐 -->
    
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huyunshun.com/2018/08/14/Spring%20Cloud%20Stream/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="初晨">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img.huyunshun.com/img/20200522182348.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="简">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/14/Spring%20Cloud%20Stream/" itemprop="url">Spring Cloud Stream</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-14T00:00:00+08:00">
                2018-08-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/springcloud/" itemprop="url" rel="index">
                    <span itemprop="name">springcloud</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Spring Cloud Stream是一个用来为微服务应用构建消息驱动能力的框架，为一些供应商的消息中间件产品提供了个性化的自动化配置实现，并且引入了发布-订阅、消费组以及消息分区这三个核心概念。简单的说，Spring Cloud Stream本质上就是整合了Spring Boot和Spring Integration，实现了一套轻量级的消息驱动的微服务框架。通过使用Spring Cloud Stream，可以有效地简化开发人员对消息中间件的使用复杂度，让系统开发人员可以有更多的精力关注于核心业务逻辑的处理。由于Spring Cloud Stream基于Spring Boot实现，所以它秉承了Spring Boot的优点，实现了自动化配置的功能帮忙我们可以快速的上手使用，但是目前为止Spring Cloud Stream只支持RabbitMQ和Kafka</p>
<p>一个简单的demo<br>创建项目：spring-cloud-stream-demo，引入依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-stream<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.hu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-stream-demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-stream-rabbit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>repackage<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>配置文件：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8989</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.10</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">guest</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">guest</span></span><br></pre></td></tr></table></figure>
<p>消息消费者类：   </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用于接收来自RabbitMQ消息的消费者</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@EnableBinding</span>(Sink<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">ConsumerDemo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Logger logger = LoggerFactory.getLogger(ConsumerDemo<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//输入通道</span></span><br><span class="line">    <span class="meta">@StreamListener</span>(Sink.INPUT)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive</span><span class="params">(Object payload)</span> </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"Received: "</span> + payload);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>应用启动之后，观察日志，有：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">main] o.s.i.codec.kryo.CompositeKryoRegistrar  : configured Kryo registration [40, java.io.File] with serializer org.springframework.integration.codec.kryo.FileSerializer</span><br><span class="line">main] o.s.integration.channel.DirectChannel    : Channel <span class="string">'application:8989.input'</span> has 1 subscriber(s).</span><br><span class="line">main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans <span class="keyword">for</span> JMX exposure on startup</span><br><span class="line">[delegate=amqp://guest@192.168.1.10:5672/, localPort= 54920]</span><br></pre></td></tr></table></figure>
<p>得知 ，系统guest用户创建了一个指向192.168.1.10:5672位置的RabbitMQ连接，在RabbitMQ的控制台中我们也可以发现它。</p>
<p>在控制台管理器中也可以看到。<br>声明了一个名为input.anonymous.bSbkR9fXS8utJPlEn2Cidw的队列，并通过RabbitMessageChannelBinder将自己绑定为它的消费者。</p>
<p>进入input.anonymous.bSbkR9fXS8utJPlEn2Cidw 通过Publish Message功能来发送一条消息到该队列中。</p>
<p>结果可以在当前启动的Spring Boot应用程序的控制台中看到：<br>[8utJPlEn2Cidw-1] com.hu.mq.ConsumerDemo                   : Received: [B@3b5ba131<br>输出的内容就是ConsumerDemo中receive方法定义的，输出的内容就是在控制台输入的信息。由于没有对消息进行序列化，所以看到的就对象的引用。   </p>
<p>这是怎么通过消费消息以实现消息驱动业务逻辑的，解释如下：</p>
<p>首先，在应用做的就是引入spring-cloud-starter-stream-rabbit依赖，包是Spring Cloud Stream对RabbitMQ支持的封装，其中包含了对RabbitMQ的自动化配置等内容，等价于spring-cloud-stream-binder-rabbit依赖。</p>
<p>这里用到的几个Spring Cloud Stream的核心注解，它们都被定义在SinkReceiver中：</p>
<p>@EnableBinding，该注解用来指定一个或多个定义了@Input或@Output注解的接口，以此实现对消息通道（Channel）的绑定。在上面的例子中，我们通过@EnableBinding(Sink.class)绑定了Sink接口，该接口是Spring Cloud Stream中默认实现的对输入消息通道绑定的定义，它的源码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Sink</span> </span>&#123;</span><br><span class="line">    String INPUT = <span class="string">"input"</span>;</span><br><span class="line">    <span class="meta">@Input</span>(Sink.INPUT)</span><br><span class="line">    <span class="function">SubscribableChannel <span class="title">input</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>它通过@Input注解绑定了一个名为input的通道。除了Sink之外，Spring Cloud Stream还默认实现了绑定output通道的Source接口，还有结合了Sink和Source的Processor接口，实际使用时我们也可以自己通过@Input和@Output注解来定义绑定消息通道的接口。当我们需要为@EnableBinding指定多个接口来绑定消息通道的时候，可以这样定义：@EnableBinding(value = {Sink.class, Source.class})。</p>
<p>@StreamListener：该注解主要定义在方法上，作用是将被修饰的方法注册为消息中间件上数据流的事件监听器，注解中的属性值对应了监听的消息通道名。在上面的例子中，我们通过@StreamListener(Sink.INPUT)注解将receive方法注册为对input消息通道的监听处理器，所以当我们在RabbitMQ的控制页面中发布消息的时候，receive方法会做出对应的响应动作。</p>
<p>之前是控制台完成了发送消息来验证了消息消费程序的功能，现在做一个单元测试方式发送消息。</p>
<p>创建单元测试：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将<span class="doctag">@EnableBinding</span>应用到spring应用的一个配置类中，可以将spring应用变成Spring Cloud Stream应用。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 注解<span class="doctag">@EnableBinding</span>本身就包含<span class="doctag">@Configuration</span>注解，并且会触发Spring Cloud Stream 基本配置。</span></span><br><span class="line"><span class="comment"> * 可以接收一个或多个接口类作为对象，后者包含代表了可绑定构件（一般来说是消息通道）的方法。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">EnableBinding</span>(<span class="title">value</span> </span>= &#123;SinkApplicationTests.SinkSender<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">SinkApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SinkSender sinkSender;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sinkSenderTester</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        sinkSender.output().send(MessageBuilder.withPayload(<span class="string">"---------------hello-------------"</span>).build());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SinkSender</span> </span>&#123;</span><br><span class="line">        <span class="comment">//定义了一个输出通道，与ConsumerDemo中定义的消费通道同名，这样与之前的消费者程序组成了一对生产者与消费者。</span></span><br><span class="line">        <span class="meta">@Output</span>(Sink.INPUT)</span><br><span class="line">        <span class="function">MessageChannel <span class="title">output</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行后，消费端就输出结果了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[8W8kbDiQJj4QA-1] com.hu.mq.ConsumerDemo                   : Received: ---------------hello-------------</span><br></pre></td></tr></table></figure>
<h5 id="Spring-Cloud-Stream应用模型的结构图"><a href="#Spring-Cloud-Stream应用模型的结构图" class="headerlink" title="Spring Cloud Stream应用模型的结构图"></a>Spring Cloud Stream应用模型的结构图</h5><p>Spring Cloud Stream构建的应用程序与消息中间件之间是通过绑定器 Binder相关联的，绑定器对于应用程序而言起到了隔离作用，它使得不同消息中间件的实现细节对应用程序来说是透明的。所以对于每一个Spring Cloud Stream的应用程序来说，它不需要知晓消息中间件的通信细节，它只需要知道 Binder对应用程序提供的概念去实现即可，而这个概念就是在快速入门中我们提到的消息通道： Channel</p>
<img src="data:image/png;base64,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" />

<h5 id="绑定器"><a href="#绑定器" class="headerlink" title="绑定器"></a>绑定器</h5><p>Binder绑定器是Spring Cloud Stream中一个非常重要的概念。在没有绑定器这个概念的情况下，我们的Spring Boot应用要直接与消息中间件进行信息交互的时候，由于各消息中间件构建的初衷不同，它们的实现细节上会有较大的差异性，这使得我们实现的消息交互逻辑就会非常笨重，因为对具体的中间件实现细节有太重的依赖，当中间件有较大的变动升级、或是更换中间件的时候，我们就需要付出非常大的代价来实施。</p>
<p>通过定义绑定器作为中间层，完美地实现了应用程序与消息中间件细节之间的隔离。通过向应用程序暴露统一的Channel通道，使得应用程序不需要再考虑各种不同的消息中间件实现。当我们需要升级消息中间件，或是更换其他消息中间件产品时，我们要做的就是更换它们对应的Binder绑定器而不需要修改任何Spring Boot的应用逻辑。这一点在上一章实现消息总线时，从RabbitMQ切换到Kafka的过程中，已经能够让我们体验到这一好处。</p>
<h5 id="发布-订阅模式"><a href="#发布-订阅模式" class="headerlink" title="发布-订阅模式"></a>发布-订阅模式</h5><p>在Spring Cloud Stream中的消息通信方式遵循了发布-订阅模式，当一条消息被投递到消息中间件之后，它会通过共享的Topic主题进行广播，消息消费者在订阅的主题中收到它并触发自身的业务逻辑处理。这里所提到的Topic主题是Spring Cloud Stream中的一个抽象概念，用来代表发布共享消息给消费者的地方。在不同的消息中间件中，Topic可能对应着不同的概念，比如：在RabbitMQ中的它对应了Exchange、而在Kakfa中则对应了Kafka中的Topic。</p>
<p>在之前的而例子，通过RabbitMQ的Channel进行发布消息给我们编写的应用程序消费，实际上Spring Cloud Stream应用启动的时候，在RabbitMQ的Exchange中也创建了一个名为input的Exchange交换器，由于Binder的隔离作用，应用程序并无法感知它的存在，应用程序只知道自己指向Binder的输入或是输出通道。</p>
<p>在发布-订阅模式中，消息被分发到多个订阅者，例如，把之前的例子，通过命令行的方式启动两个不同端口的进程。此时，在RabbitMQ控制页面的Channels标签页中看到如下图所示的两个消息通道，它们分别绑定了启动的两个应用程序。<br>把项目install，生成jar，进入目录，在控制台通过命令启动另外一个实例，指定端口。<br>java -jar spring-cloud-stream-demo-1.0-SNAPSHOT.jar -server.port 2345</p>
<img src="data:image/png;base64,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DWg//cSX3v3XklXZJY0df/7j5sw/btY4KCD0gVH/2sMThCavXnTymc31X1Vk/1r9xG/AqBkJ/3Kgwv19gNDUjRturcooaWw88NqzB2x2BwQEOHyTT0BAANBhPLP3tTN7rXdFLtrwJNv/RERERNRzbvk7AP0Gjkt/6w/TG4//qeL4ydq6y0ZxECDgbn3oT8c9GPvIww+H63szryU4YcM7+qIt71Z83nyjAwF36MNjk2bNTBgXWLvZEx0AYGB4+lt/+D+1FX9QXuMD/Ohu/U/HP/Jo8iMPyX9L2I7wX//hD9PVrwCSPztjzswH+GeAiYiIiKhXdIIgeDoORERERETkJi5/BoCIiIiIiLwHOwBERERERH6EHQAiIiIiIj/CDgARERERkR9hB4CIiIiIyI+wA0BERERE5EfYASAiIiIi8iPsABARERER+RF2AIiIiIiI/Ag7AEREREREfoQdACIiIiIiP8IOABERERGRH2EHgIiIiIjIj7ADQERERETkR9gBICIiIiLyI+wAEBERERH5EXYAiIiIiIj8CDsARERERER+hB0AIiIiIiI/wg4AEREREZEfYQeAiIiIiMiPsANARERERORH2AEgIiIiIvIj7AAQEREREfkRdgCIiIiIiPxIf09HwANqamo8HQXyjKioKE9HgYiIiMjD/LEDADYE/RI7fkRERETgFCAiIiIiIr/CDgARERERkR9hB4CIiIiIyI+wA0BERERE5Ef89CFgIgB//etfz58//5e//MV2V79+/UJCQsaMGaPT6dwfsc7V7i346PLwR1fNHKe933Rk644aRM5dGK93b8SIiIjI63m4A2BYo4tFtbA6BjDk6WJhEDKjPRsj8iO1tbW33377Aw88YLvr5s2b//M//9PY2BgWFqbabKx4ft7mi+b/hz+zfUOi+5vY5/d+9G3k3FVi4/78+wWHL8l77ox8cmF8IBA4eeGT2Lrjw6qxC+MD3R4/IiIi8mZumwJkLHlCZyXvlJ1D9yTrnigxuitm5Le++eab4ODg27T80z/905AhQ65du2b7qfBnth8W7ViELfM2n3V3tE1Hqi+PiFXd2h8+ZZXoyUicPXDEJG4NnDwjEmeP17o7ekREROTl3DoCkFTSVjrL8nZptCC4MwZEKjdv3uzo6Lh165bm3o6Ojps3bzr6fOB9E0fjeIsRkXoAMFUse3JzPQCL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">

<p>而在Exchanges标签页中，我们还能找到名为input的交换器，点击进入可以看到如下图所示的详情页面，其中在Bindings中的内容就是两个应用程序绑定通道中的消息队列，我们可以通过Exchange页面的Publish Message来发布消息，此时可以发现两个启动的应用程序都输出了消息内容。   </p>
<img src="data:image/png;base64,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">

<p>相对于点对点队列实现的消息通信来说，Spring Cloud Stream采用的发布-订阅模式可以有效的降低消息生产者与消费者之间的耦合，当我们需要对同一类消息增加一种处理方式时，只需要增加一个应用程序并将输入通道绑定到既有的Topic中就可以实现功能的扩展，而不需要改变原来已经实现的任何内容。   </p>
<h5 id="消费组"><a href="#消费组" class="headerlink" title="消费组"></a>消费组</h5><p>虽然Spring Cloud Stream通过发布-订阅模式将消息生产者与消费者做了很好的解耦，基于相同主题的消费者可以轻松的进行扩展，但是这些扩展都是针对不同的应用实例而言的，在现实的微服务架构中，我们每一个微服务应用为了实现高可用和负载均衡，实际上都会部署多个实例。</p>
<p>消息生产者发送消息给某个具体微服务时，只希望被消费一次，按照上面我们启动两个应用的例子，虽然它们同属一个应用，但是这个消息出现了被重复消费两次的情况。为了解决这个问题，在Spring Cloud Stream中提供了消费组的概念。</p>
<p>如果在同一个主题上的应用需要启动多个实例的时候，我们可以通过spring.cloud.stream.bindings.input.group属性为应用指定一个组名，这样这个应用的多个实例在接收到消息的时候，只会有一个成员真正的收到消息并进行处理。</p>
<p>默认情况下，Spring Cloud Stream会为其分配一个独立的匿名消费组。所以，如果同一主题下所有的应用都没有指定消费组的时候，当有消息被发布之后，所有的应用都会对其进行消费，因为它们各自都属于一个独立的组中。大部分情况下，我们在创建Spring Cloud Stream应用的时候，建议最好为其指定一个消费组，以防止对消息的重复处理，除非该行为需要这样做（比如：刷新所有实例的配置等）。</p>
<img src="data:image/png;base64,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z7b8fv+dO3e+++671dVVFEULCwvfeecdq9V6BL1ez0JhYWFBQUF3d/e1a9eYLf3+/v7W1tazZ8++8HEzgiAWFxc//vjjoaEhmqZ5PN7ly5cvXbqUVJRjSlpa2ocffnjixImrV692dXXZbLapqanq6urf/OY3qampL/zm7+zsfPnll+3t7bu7u2w2u6am5q233iosLExs518KRqPxb/7mbwYGBpgg1Zs3bw4NDZ06derixYsvbAXMdPajjz4aGBggSZLL5V66dOnSpUtHalX36usKg1gs/vDDDy9cuPDll1+2tbXZ7fapqanTp0+fO3eOmZU/e1PRaLS/v//69evz8/MEQeTk5Fy4cKGmpkYgEBxTUWEAQbC6utpkMg0ODt64ccPpdP7ud7/r6el58803a2trn8u7TZKk1+u9efPmd999h2EYAABnz5596623UlNTD+fgTpKDQ6vV/sVf/MW5c+euXbv28OHD7u7uwcHBd955p7W1VSaTPZcPIBKJ3Lt379q1a5ubmwRBlJaWXrp0yWw2H504l/0DgqDFYsnPz7fZbDdu3Jiamrp69Wpvb++VK1caGhqe605Jktzc3Lx169bXX3+NYRhJkqdOnbpy5UpGRsbhh4D/OK+LroAgyOFw0tLS/uRP/uTUqVOffPLJxMTEnTt3BgcH6+vrz549+4zbIT09Pd98843L5QoGgwqF4syZM42NjUqlks1mH2tRYUAQRCwWNzQ0MBHb3333ncvl+vu///u2tjZma+pZGllbW2tra+vo6Njb2yMIwmQyffjhh0wc8+GfkkmScCAI4vF4BoPhz//8z0+dOvUv//Ivc3NzX3755YMHD1pbW0+fPv0sybJIkrx3797XX3+9sbERCoU0Gs2VK1fKyspkMlmi9j6PDjAMi0Simpoao9HY39//zTffrKys/Pa3v2XMqrm5+Vka2draun379r179/b29uLxuNFo/PWvf63X64VC4RE0q9dFVxggCBIKhQaD4a//+q+np6d///vfu1yuW7dujY2NMQFjP5KPZH5+/vPPP3c4HDs7O2w2+8KFCw0NDVqt9tDi0w8HRoDT09PfeOMNk8nU3d19+/bt6enp9fX19vb2n//857m5uU8z+93d3e7u7rt373q93lgsptVq33nnncLCQrlcfnQOHCRJCAiCSKXSkpIStVrNOPrX1tauXr3a19d3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">

<p>使用消费组实现消息消费的负载均衡<br>先创建一个消费者应用，实现了greetings主题上的输入通道绑定；<br>spring.cloud.stream.bindings.input.group=Service-A #指定了该应用实例都属于Service-A消费组<br>spring.cloud.stream.bindings.input.destination=greetings #指定了输入通道对应的主题名<br>完成了消息消费者之后，我们再来实现一个消息生产者应用；<br>它的输出通道绑定目标也指向greetings主题<br>spring.cloud.stream.bindings.output.destination=greetings   </p>
<h5 id="消息分区"><a href="#消息分区" class="headerlink" title="消息分区"></a>消息分区</h5><p>通过引入消费组的概念，已经能够在多实例的情况下，保障每个消息只被组内一个实例进行消费。<br>通过上面对消费组参数设置后的实验，消费组并无法控制消息具体被哪个实例消费。也就是说，对于同一条消息，它多次到达之后可能是由不同的实例进行消费的。但是对于一些业务场景，就需要对于一些具有相同特征的消息每次都可以被同一个消费实例处理，比如：一些用于监控服务，为了统计某段时间内消息生产者发送的报告内容，监控服务需要在自身内容聚合这些数据，那么消息生产者可以为消息增加一个固有的特征ID来进行分区，使得拥有这些ID的消息每次都能被发送到一个特定的实例上实现累计统计的效果，否则这些数据就会分散到各个不同的节点导致监控结果不一致的情况。而分区概念的引入就是为了解决这样的问题：当生产者将消息数据发送给多个消费者实例时，保证拥有共同特征的消息数据始终是由同一个消费者实例接收和处理。</p>
<p>Spring Cloud Stream为分区提供了通用的抽象实现，用来在消息中间件的上层实现分区处理，所以它对于消息中间件自身是否实现了消息分区并不关心，这使得Spring Cloud Stream为不具备分区功能的消息中间件也增加了分区功能扩展。</p>
<p>在消费者应用，增加配置：  </p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.cloud.stream.bindings.input.consumer.partitioned：通过该参数开启消费者分区功能；</span></span><br><span class="line"><span class="attr">spring.cloud.stream.instanceCount：该参数指定了当前消费者的总实例数量；</span></span><br><span class="line"><span class="meta">spring.cloud.stream.instanceIndex：该参数设置当前实例的索引号，从0开始，最大值为spring.cloud.stream.instanceCount参数</span> <span class="string">- 1。我们试验的时候需要启动多个实例，可以通过运行参数来为不同实例设置不同的索引值。</span></span><br></pre></td></tr></table></figure>
<p>在生产者应用，增加配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.cloud.stream.bindings.output.producer.partitionKeyExpression：通过该参数指定了分区键的表达式规则，我们可以根据实际的输出消息规则来配置SpEL来生成合适的分区键；</span></span><br><span class="line"><span class="attr">spring.cloud.stream.bindings.output.producer.partitionCount：该参数指定了消息分区的数量。</span></span><br></pre></td></tr></table></figure>
<p>消息分区配置完成，启动生产者，同时消费者启动多个，注意为消费者指定不同的实例索引号，这样当同一个消息被发给消费组时，我们可以发现只有一个消费实例在接收和处理这些相同的消息。</p>

          
        
      
    </div>
     <!-- 相关文章推荐 -->
    
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huyunshun.com/2018/08/14/Spring%20Cloud%20Eureka/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="初晨">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img.huyunshun.com/img/20200522182348.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="简">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/14/Spring%20Cloud%20Eureka/" itemprop="url">Spring Cloud Eureka</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-14T00:00:00+08:00">
                2018-08-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/springcloud/" itemprop="url" rel="index">
                    <span itemprop="name">springcloud</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Spring Cloud Eureka是Spring Cloud Netflix项目下的服务治理模块。而Spring Cloud Netflix项目是Spring Cloud的子项目之一，主要内容是对Netflix公司一系列开源产品的包装，它为Spring Boot应用提供了自配置的Netflix OSS整合。通过一些简单的注解，开发者就可以快速的在应用中配置一下常用模块并构建庞大的分布式系统。它主要提供的模块包括：服务发现（Eureka），断路器（Hystrix），智能路由（Zuul），客户端负载均衡（Ribbon）等。<br>创建一个项目spring-cloud-eureka<br>引入子模块需要的依赖：   </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.hu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>spring-cloud-eureka-server<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>spring-cloud-eureka-provider<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>spring-cloud-eureka-consumer<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>spring-cloud-eureka-consumer-feign<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 设置jdk版本等信息 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- dependency management --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>Dalston.SR1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="创建服务注册中心"><a href="#创建服务注册中心" class="headerlink" title="创建服务注册中心"></a>创建服务注册中心</h5><p>在Idea中创建一个Eureka服务子模块，命名为spring-cloud-eureka-server，并在pom.xml中引入需要的依赖内容：   </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.hu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 导入eureka依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>创建 启动类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableEurekaServer</span><span class="comment">//表示是一个eurekaserver</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaServerApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(EurekaServerApplication<span class="class">.<span class="keyword">class</span>).<span class="title">web</span>(<span class="title">true</span>).<span class="title">run</span>(<span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>增加配置：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">security:</span></span><br><span class="line">  <span class="attr">basic:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">user:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">user</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8761</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">localhost</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://user:123456@localhost:8761/eureka</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br></pre></td></tr></table></figure>
<h5 id="创建服务提供方"><a href="#创建服务提供方" class="headerlink" title="创建服务提供方"></a>创建服务提供方</h5><p>创建一个服务spring-cloud-eureka-provider，引入依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.hu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-eureka-provider<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--boot eureka--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- boot web--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>创建启动类：   </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProviderApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(ProviderApplication<span class="class">.<span class="keyword">class</span>).<span class="title">web</span>(<span class="title">true</span>).<span class="title">run</span>(<span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>创建配置：   </p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">7900</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">provider-hello</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://user:123456@localhost:8761/eureka</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">root:</span> <span class="string">INFO</span></span><br><span class="line">  <span class="comment">#通过spring.application.name属性，我们可以指定微服务的名称后续在调用的时候只需要使用该名称就可以进行服务的访问。</span></span><br><span class="line">  <span class="comment">#eureka.client.serviceUrl.defaultZone属性对应服务注册中心的配置内容，指定服务注册中心的位置。</span></span><br><span class="line">  <span class="comment">#为了在本机上测试区分服务提供方和服务注册中心，使用server.port属性设置不同的端口。</span></span><br></pre></td></tr></table></figure>
<p>创建服务 ：   </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProviderController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String[] users = &#123;<span class="string">"5"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>,<span class="string">"1"</span>&#125;;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/users"</span>,method = RequestMethod.GET)</span><br><span class="line">    <span class="keyword">public</span> String[] users()&#123;</span><br><span class="line">        <span class="keyword">return</span> users;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/users/&#123;id&#125;"</span>,method = RequestMethod.GET)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">users</span><span class="params">(@PathVariable String id)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;users.length;i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (id!=<span class="keyword">null</span>&amp;&amp;id.equals(users[i])) &#123;</span><br><span class="line">                <span class="keyword">return</span> users[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>启动项目后，浏览器查看注册中心，可以看到服务已经被注册到注册中心。<br>同样方式创建服务的消费者   </p>
<h5 id="创建服务消费方"><a href="#创建服务消费方" class="headerlink" title="创建服务消费方"></a>创建服务消费方</h5><p>创建子模块spring-cloud-eureka-consumer，引入依赖：   </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.hu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-eureka-consumer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--boot eureka--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- boot web--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>创建配置：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">7902</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">consumer-hello</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://user:123456@localhost:8761/eureka</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">root:</span> <span class="string">INFO</span></span><br></pre></td></tr></table></figure>
<p>创建启动类：   </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建应用主类</span></span><br><span class="line"><span class="comment"> * 初始化RestTemplate，用来真正发起REST请求。</span></span><br><span class="line"><span class="comment"> * 注解<span class="doctag">@EnableDiscoveryClient</span>注解用来将当前应用加入到服务治理体系中。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerApplication</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过注解 <span class="doctag">@LoadBalanced</span>  使用Ribbon负载均衡</span></span><br><span class="line"><span class="comment">     * Spring Cloud Ribbon是基于Netflix Ribbon实现的一套客户端负载均衡的工具。</span></span><br><span class="line"><span class="comment">     * 这样就可以在Controller中，去掉通过LoadBalancerClient选取实例和拼接URL的步骤，直接通过RestTemplate发起请求。</span></span><br><span class="line"><span class="comment">     * 请求的host位置并没有使用一个具体的IP地址和端口的形式，而是采用了服务名的方式组成，不需要具体的IP和端口。因为：</span></span><br><span class="line"><span class="comment">     * Spring Cloud Ribbon有一个拦截器，它能够在这里进行实际调用的时候，自动的去选取服务实例，并将实际要请求的IP地址和端口替换这里的服务名，从而完成服务接口的调用。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@LoadBalanced</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RestTemplate <span class="title">restTemplate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(ConsumerApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*开启多个provider实例，</span></span><br><span class="line"><span class="comment">    可以采用修改yml文件 中的端口号重复启动实例，也可以另外新建多个provider，修改其中的yml文件，依次启动。</span></span><br><span class="line"><span class="comment">    由于eureka配置类ribbon负载均衡策略，消费者的请求会在客户端被决定好发送到哪台服务提供者进行处理。*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>创建控制器，控制器中调用了注册中心的提供者服务   </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RestTemplate resttemplate;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LoadBalancerClient loadBalancerClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/users"</span>,method = RequestMethod.GET)</span><br><span class="line">    <span class="keyword">public</span> String[] users()&#123;</span><br><span class="line">        <span class="comment">//不使用负载</span></span><br><span class="line">        <span class="comment">//ServiceInstance serviceInstance = loadBalancerClient.choose("provider-hello");</span></span><br><span class="line">        <span class="comment">//String url = "http://" + serviceInstance.getHost() + ":" + serviceInstance.getPort() + "/users";</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用负载</span></span><br><span class="line">        String url=<span class="string">"http://provider-hello/users"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//返回值类型和我们的业务返回值一致</span></span><br><span class="line">        <span class="keyword">return</span> resttemplate.getForObject(url, String[]<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/users/&#123;id&#125;"</span>,method = RequestMethod.GET)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">users</span><span class="params">(@PathVariable String id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"-----------------------"</span>+id);</span><br><span class="line">        String url=<span class="string">"http://provider-hello/users/"</span>+id;</span><br><span class="line">        <span class="keyword">return</span> resttemplate.getForObject(url, String<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行，浏览器访问控制器，获取了服务提供者的信息。   </p>
<h5 id="Spring-Cloud-Consul"><a href="#Spring-Cloud-Consul" class="headerlink" title="Spring Cloud Consul"></a>Spring Cloud Consul</h5><p>Spring Cloud Consul项目是针对Consul的服务治理实现。Consul是一个分布式高可用的系统，它包含多个组件，包含了下面几个特性：</p>
<ul>
<li>服务发现   </li>
<li>健康检查   </li>
<li>Key/Value存储     </li>
<li>多数据中心   </li>
</ul>
<p>基于Spring Boot的微服务应用注册到Consul上，实现微服务架构中的服务治理。<br>以之前实现的基于Eureka的示例为基础，只需要在pom.xml中将eureka的依赖修改为如下依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-consul-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>再修改配置文件：   </p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span> </span><br><span class="line">  <span class="attr">cloud:</span> </span><br><span class="line">    <span class="attr">consul:</span> </span><br><span class="line">      <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">8500</span></span><br></pre></td></tr></table></figure>
<p>这样就把基于Eureka的服务换为基于consul服务治理的服务提供者；<br>Spring cloud服务发现的接口DiscoveryClient是Spring Cloud对服务治理做的一层抽象，所以可以屏蔽Eureka和Consul服务治理的实现细节，只需要引入不同的服务治理依赖，并配置相关的配置属性即可。<br>consul是服务端不需要像Eureka那种创建，直接下载consul的服务端程序就可以使用。     </p>
<h5 id="Spring-Cloud-Ribbon"><a href="#Spring-Cloud-Ribbon" class="headerlink" title="Spring Cloud Ribbon"></a>Spring Cloud Ribbon</h5><p>Spring Cloud Ribbon是基于Netflix Ribbon实现的一套客户端负载均衡的工具。它是一个基于HTTP和TCP的客户端负载均衡器。它可以通过在客户端中配置ribbonServerList来设置服务端列表去轮询访问以达到均衡负载的作用。</p>
<ul>
<li>当Ribbon与Eureka联合使用时，ribbonServerList会被DiscoveryEnabledNIWSServerList重写，扩展成从Eureka注册中心中获取服务实例列表。同时它也会用NIWSDiscoveryPing来取代IPing，它将职责委托给Eureka来确定服务端是否已经启动。    </li>
<li>当Ribbon与Consul联合使用时，ribbonServerList会被ConsulServerList来扩展成从Consul获取服务实例列表。同时由ConsulPing来作为IPing接口的实现。   </li>
</ul>
<p>不论是与Eureka还是Consul结合，都可以快速在Spring Cloud中实现服务间调用的负载均衡。<br>在之前的模块中，引入依赖：   </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>修改类增加@LoadBalanced注解(其实前面已经使用了)：   </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@LoadBalanced</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> RestTemplate <span class="title">restTemplate</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>去掉通过LoadBalancerClient选取实例和拼接URL的步骤，直接通过RestTemplate发起请求。   </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> resttemplate.getForObject(url, String[]<span class="class">.<span class="keyword">class</span>)</span>;</span><br></pre></td></tr></table></figure>
<p>这样就实现了一个简单的Ribbon负载均衡。   </p>
<h5 id="Spring-Cloud-Feign"><a href="#Spring-Cloud-Feign" class="headerlink" title="Spring Cloud Feign"></a>Spring Cloud Feign</h5><p>Spring Cloud Feign是一套基于Netflix Feign实现的声明式服务调用客户端。它使得编写Web服务客户端变得更加简单。我们只需要通过创建接口并用注解来配置它既可完成对Web服务接口的绑定。它具备可插拔的注解支持，包括Feign注解、JAX-RS注解。它也支持可插拔的编码器和解码器。Spring Cloud Feign还扩展了对Spring MVC注解的支持，同时还整合了Ribbon和Eureka来提供均衡负载的HTTP客户端实现。<br>新建一个模块spring-cloud-eureka-consumer-feign，引入依赖：   </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-feign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>启动类：   </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Spring Cloud Feign是一套基于Netflix Feign实现的声明式服务调用客户端。它使得编写Web服务客户端变得更加简单。</span></span><br><span class="line"><span class="comment"> * 我们只需要通过创建接口并用注解来配置它既可完成对Web服务接口的绑定。</span></span><br><span class="line"><span class="comment"> * 它具备可插拔的注解支持，包括Feign注解、JAX-RS注解。它也支持可插拔的编码器和解码器。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Spring Cloud Feign还扩展了对Spring MVC注解的支持，同时还整合了Ribbon和Eureka来提供均衡负载的HTTP客户端实现。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span> <span class="comment">//修改应用主类。通过@EnableFeignClients注解开启扫描Spring Cloud Feign客户端的功能</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(ConsumerApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>创建一个Feign的客户端接口：   </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建一个Feign的客户端接口定义。</span></span><br><span class="line"><span class="comment"> * 使用<span class="doctag">@FeignClient</span>注解来指定这个接口所要调用的服务名称，</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 接口中定义的各个函数使用Spring MVC的注解就可以来绑定服务提供方的REST接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@FeignClient</span>(<span class="string">"provider-hello"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">HelloFeignClient</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/users"</span>,method = RequestMethod.GET)</span><br><span class="line">    String[] users();</span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/users/&#123;id&#125;"</span>,method = RequestMethod.GET)</span><br><span class="line">    <span class="function">String <span class="title">users</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> String id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>控制器直接通过接口去掉服务：   </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过Spring Cloud Feign来实现服务调用的方式更加简单了，通过<span class="doctag">@FeignClient</span>定义的接口来统一的生命我们需要依赖的微服务接口。</span></span><br><span class="line"><span class="comment"> * 而在具体使用的时候就跟调用本地方法一点的进行调用即可。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 由于Feign是基于Ribbon实现的，所以它自带了客户端负载均衡功能，也可以通过Ribbon的IRule进行策略扩展。</span></span><br><span class="line"><span class="comment"> * 另外，Feign还整合的Hystrix来实现服务的容错保护，在Dalston版本中，Feign的Hystrix默认是关闭的。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    HelloFeignClient helloFeignClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/users"</span>,method = RequestMethod.GET)</span><br><span class="line">    <span class="keyword">public</span> String[] users()&#123;</span><br><span class="line">        <span class="keyword">return</span> helloFeignClient.users();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/users/&#123;id&#125;"</span>,method = RequestMethod.GET)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">users</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> String id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> helloFeignClient.users(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样就完成了简单的整合调用。</p>

          
        
      
    </div>
     <!-- 相关文章推荐 -->
    
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huyunshun.com/2018/08/14/springcloud%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="初晨">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://img.huyunshun.com/img/20200522182348.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="简">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/14/springcloud%E4%BB%8B%E7%BB%8D/" itemprop="url">springcloud介绍</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-14T00:00:00+08:00">
                2018-08-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/springcloud/" itemprop="url" rel="index">
                    <span itemprop="name">springcloud</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Spring Cloud 是一系列框架的有序集合，它利用 Spring Boot 的开发便利性简化了分布式系统的开发，比如服务发现、服务网关、服务路由、链路追踪等。Spring Cloud 并不重复造轮子，而是将市面上开发得比较好的模块集成进去，进行封装，从而减少了各模块的开发成本。换句话说：Spring Cloud 提供了构建分布式系统所需的”全家桶”。</p>
<p>其主要优点有：</p>
<ul>
<li>集大成者，Spring Cloud 包含了微服务架构的方方面面。</li>
<li>约定优于配置，基于注解，没有配置文件。</li>
<li>轻量级组件，Spring Cloud 整合的组件大多比较轻量级，且都是各自领域的佼佼者。</li>
<li>开发简便，Spring Cloud 对各个组件进行了大量的封装，从而简化了开发。</li>
<li>开发灵活，Spring Cloud 的组件都是解耦的，开发人员可以灵活按需选择组件。</li>
</ul>
<p>缺点：</p>
<ul>
<li>项目结构复杂，每一个组件或者每一个服务都需要创建一个项目。</li>
<li>部署门槛高，项目部署需要配合 Docker 等容器技术进行集群部署，而要想深入了解 Docker，学习成本高。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">1、Spring Cloud Config 配置中心，利用git集中管理程序的配置。 </span><br><span class="line"></span><br><span class="line">2、Spring Cloud Netflix 集成众多Netflix的开源软件</span><br><span class="line">3、Spring Cloud Bus 消息总线，利用分布式消息将服务和服务实例连接在一起，用于在一个集群中传播状态的变化 </span><br><span class="line">4、Spring Cloud for Cloud Foundry 利用Pivotal Cloudfoundry集成你的应用程序</span><br><span class="line">5、Spring Cloud Cloud Foundry Service Broker 为建立管理云托管服务的服务代理提供了一个起点。</span><br><span class="line">6、Spring Cloud Cluster 基于Zookeeper, Redis, Hazelcast, Consul实现的领导选举和平民状态模式的抽象和实现。</span><br><span class="line">7、Spring Cloud Consul 基于Hashicorp Consul实现的服务发现和配置管理。</span><br><span class="line">8、Spring Cloud Security 在Zuul代理中为OAuth2 rest客户端和认证头转发提供负载均衡</span><br><span class="line">9、Spring Cloud Sleuth SpringCloud应用的分布式追踪系统，和Zipkin，HTrace，ELK兼容。</span><br><span class="line">10、Spring Cloud Data Flow 一个云本地程序和操作模型，组成数据微服务在一个结构化的平台上。</span><br><span class="line">11、Spring Cloud Stream 基于Redis,Rabbit,Kafka实现的消息微服务，简单声明模型用以在Spring Cloud应用中收发消息。</span><br><span class="line">12、Spring Cloud Stream App Starters 基于Spring Boot为外部系统提供spring的集成</span><br><span class="line">13、Spring Cloud Task 短生命周期的微服务，为SpringBooot应用简单声明添加功能和非功能特性。</span><br><span class="line">14、Spring Cloud Task App Starters</span><br><span class="line">15、Spring Cloud Zookeeper 服务发现和配置管理基于Apache Zookeeper。</span><br><span class="line">16、Spring Cloud for Amazon Web Services 快速和亚马逊网络服务集成。</span><br><span class="line">17、Spring Cloud Connectors 便于PaaS应用在各种平台上连接到后端像数据库和消息经纪服务。</span><br><span class="line">18、Spring Cloud Starters （项目已经终止并且在Angel.SR2后的版本和其他项目合并）</span><br><span class="line">19、Spring Cloud CLI 插件用Groovy快速的创建Spring Cloud组件应用。</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
     <!-- 相关文章推荐 -->
    
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/12/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><span class="page-number current">13</span><a class="page-number" href="/page/14/">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/25/">25</a><a class="extend next" rel="next" href="/page/14/">下一页</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://img.huyunshun.com/img/20200522182348.png"
                alt="初晨" />
            
              <p class="site-author-name" itemprop="name">初晨</p>
              <p class="site-description motion-element" itemprop="description">永远不要说你知道本质，更别说真相了。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">249</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">46</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">109</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          
<!--近期文章版块-->
            
                <div class="links-of-blogroll motion-element links-of-blogroll-block">
                  <div class="links-of-blogroll-title">
                    <!-- modify icon to fire by szw -->
                    <i class="fa fa-history fa-" aria-hidden="true"></i>
                    近期文章
                  </div>
                  <ul class="links-of-blogroll-list">
                    
                    
                      <li>
                        <a href="/2020/05/22/WebSocket%E3%80%81Socket%E3%80%81TCP%E3%80%81HTTP%E5%8C%BA%E5%88%AB/" title="WebSocket、Socket、TCP、HTTP区别" target="_blank">WebSocket、Socket、TCP、HTTP区别</a>
                      </li>
                    
                      <li>
                        <a href="/2020/05/19/Springboot%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%8E%A5%E5%8F%A3%E9%98%B2%E5%88%B7/" title="Springboot项目的接口防刷" target="_blank">Springboot项目的接口防刷</a>
                      </li>
                    
                      <li>
                        <a href="/2020/05/03/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Volatile%E5%85%B3%E9%94%AE%E5%AD%97%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" title="深入理解Volatile关键字及其实现原理" target="_blank">深入理解Volatile关键字及其实现原理</a>
                      </li>
                    
                      <li>
                        <a href="/2020/04/20/%E4%BD%BF%E7%94%A8vscode%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%AC%94%E8%AE%B0%E7%8E%AF%E5%A2%83/" title="使用vscode搭建个人笔记环境" target="_blank">使用vscode搭建个人笔记环境</a>
                      </li>
                    
                      <li>
                        <a href="/2020/01/20/HBase%E4%BB%8B%E7%BB%8D%E5%AE%89%E8%A3%85%E4%B8%8E%E6%93%8D%E4%BD%9C/" title="HBase介绍安装与操作" target="_blank">HBase介绍安装与操作</a>
                      </li>
                    
                  </ul>
                </div>
            
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Copyright</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  


</body>
</html>
